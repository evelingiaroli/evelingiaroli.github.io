<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.4.3">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2017-04-06T14:30:48-03:00</updated><id>http://localhost:4000/</id><title type="html">Programación en R - 2017</title><subtitle>Programación y análisis de datos en R con aplicaciones científicas
</subtitle><entry><title type="html">using types effectively</title><link href="http://localhost:4000/2017/04/05/simple.html" rel="alternate" type="text/html" title="using types effectively" /><published>2017-04-05T00:00:00-03:00</published><updated>2017-04-05T00:00:00-03:00</updated><id>http://localhost:4000/2017/04/05/simple</id><content type="html" xml:base="http://localhost:4000/2017/04/05/simple.html">&lt;section data-markdown=&quot;&quot;&gt;


# Using Types Effectively?


## What does that mean?

The recent evolution of C++ is (from one point of view) largely about
**strengthening** and **expanding** the **capabilities for dealing with types**.

-   expansion of `type_traits`
-   `decltype` to utter types
-   `auto` to preserve types, prevent conversions, infer return types
-   `nullptr` to prevent `int` / pointer confusion
-   scoped `enum`
-   GSL: `owner&lt;T&gt;`, `not_null&lt;T&gt;`
-   Concepts TS

&lt;div class=&quot;NOTES&quot;&gt;
Some of the features added to modern C++ to deal with types.

Obviously someone thinks that types are important. And the ability to wrangle
them and mould them to our purposes is an important part of C++.

Types are the currency of metaprogramming, but also important for safety in
&quot;regular&quot; programming; hence we see things like the GSL's `owner&amp;lt;&amp;gt;` and `not_null&amp;lt;&amp;gt;`.

&lt;/div&gt;

&amp;lt;/section&amp;gt;


## FP isn't (only) about

-   first class functions
-   higher order functions
-   lexical scoping, closures
-   pattern matching
-   value semantics
-   immutability
-   concurrency through immutability
-   laziness
-   garbage collection
-   boxed data types / &quot;inefficient&quot; runtime models
-   the M-word

&lt;div class=&quot;NOTES&quot;&gt;
Functional languages can teach us a thing or two about types. (After all, they
seem to be teaching us everything else.)

Here are some things you may think of when functional programming is mentioned&amp;#x2026;

&lt;/div&gt;


## FP is (also, importantly) about

-   using types effectively and expressively
-   making illegal states unrepresentable
-   making illegal behaviour result in a type error
-   using total functions for easier to use, harder to misuse interfaces

&lt;div class=&quot;NOTES&quot;&gt;
These aspects of functional programming are often overlooked.

Many functional languages have well-developed, expressive type systems.

C++ is moving in that direction.

&lt;/div&gt;


## What is a type?

-   A way for the compiler to know what opcodes to output (dmr's motivation)?
-   The way data is stored (representational)?
-   Characterised by what operations are possible (behavioural)?
-   Determines the values that can be assigned?
-   Determines the meaning of the data?


## What is a type?

![img](./int_bool_1.png)

&quot;Only Lua would have '`1 == true`' evaluate to `false`. #wantmydayback&quot;

![img](./int_bool_2.png)

&quot;But, how can `1` be equal to `true`? `1` is an integer, and `true` is a boolean. Lua
seems to be correct here. It's your view of the world that has been warped.&quot;

(Smiley faces make criticism OK!)


## What is a type?

-   The set of values that can inhabit an expression
    -   may be finite or &quot;infinite&quot;
    -   characterized by cardinality
-   Expressions have types
    -   A program has a type


## Let's play a game

To help us get thinking about types.

I'll tell you a type.

You tell me how many values it has.

There are no tricks: if it seems obvious, it is!


## Level 1

Types as sets of values


## Level 1

How many values?

    bool;

2 (`true` and `false`)


## Level 1

How many values?

    char;

256


## Level 1

How many values?

    void;

0

    struct Foo { Foo() = delete; };

    struct Bar { template &lt;typename T=&quot;&quot;&gt; Bar(); };

&lt;div class=&quot;NOTES&quot;&gt;
cf BASIC's function vs procedure

&lt;/div&gt;


## Level 1

How many values?

    struct Foo {};

1


## Level 1

How many values?

    enum FireSwampDangers : int8_t {
      FLAME_SPURTS,
      LIGHTNING_SAND,
      ROUSES
    };

3

&lt;div class=&quot;NOTES&quot;&gt;
It is possible to put something into FireSwampDangers that fits
representationally (eg. the value 4). But that would be meaningless: there would
be no connection between the value represented and its interpretation. Because
there is no interpretation: cf. an unconstructed object.

&lt;/div&gt;


## Level 1

How many values?

    template &lt;typename T=&quot;&quot;&gt;
    struct Foo {
      T m_t;
    };

`Foo` has as many values as `T`


## End of Level 1

Algebraically, a type is the number of values that inhabit it.

These types are equivalent:

    bool;
    
    enum class InatorButtons {
      ON_OFF,
      SELF_DESTRUCT
    };

Let's move on to level 2.


## Level 2

Aggregating Types


## Level 2

How many values?

    std::pair&amp;lt;char, bool&amp;gt;;

256 \* 2 = 512


## Level 2

How many values?

    struct Foo {
      char a;
      bool b;
    };

256 \* 2 = 512


## Level 2

How many values?

    std::tuple&amp;lt;bool, bool, bool&amp;gt;;

2 \* 2 \* 2 = 8


## Level 2

How many values?

    template &amp;lt;typename T, typename U&amp;gt;
    struct Foo {
      T m_t;
      U m_u;
    };

(# of values in `T`) \* (# of values in `U`)


## End of Level 2

When two types are &quot;concatenated&quot; into one compound type, we &lt;span class=&quot;underline&quot;&gt;multiply&lt;/span&gt; the # of
inhabitants of the components.

This kind of compounding gives us a &lt;span class=&quot;underline&quot;&gt;product type&lt;/span&gt;.

On to Level 3.


## Level 3

Alternating Types


## Level 3

How many values?

    std::optional&lt;char&gt;;

256 + 1 = 257


## Level 3

How many values?

    std::variant&amp;lt;char, bool&amp;gt;;

256 + 2 = 258


## Level 3

How many values?

    template &amp;lt;typename T, typename U&amp;gt;
    struct Foo {
      std::variant&amp;lt;T, U&amp;gt;;
    }

(# of values in `T`) + (# of values in `U`)


## End of Level 3

When two types are &quot;alternated&quot; into one compound type, we &lt;span class=&quot;underline&quot;&gt;add&lt;/span&gt; the # of
inhabitants of the components.

This kind of compounding gives us a &lt;span class=&quot;underline&quot;&gt;sum type&lt;/span&gt;.


## Level 4

Function Types


## Level 4

How many values?

    bool f(bool);

4


## Level 4

Four possible values
 ![img](./function_bool.svg)


## Level 4

    bool f1(bool b) { return b; }
    bool f2(bool) { return true; }
    bool f3(bool) { return false; }
    bool f4(bool b) { return !b; }


## Level 4

How many values?

    char f(bool);

256 \* 256 = 65,536


## Level 4

How many values (for `f`)?

    enum class Foo
    {
      BAR,
      BAZ,
      QUUX
    };
    char f(Foo);

256 \* 256 \* 256 = 16,777,216


## Level 4

The number of values of a function is the number of different ways we can draw
arrows between the inputs and the outputs.
 ![img](./function.svg)


## Level 4

How many values?

    template &amp;lt;class T, class U&amp;gt;
    U f(T);

\(|U|^{|T|}\)


## End of Level 4

When we have a &lt;span class=&quot;underline&quot;&gt;function&lt;/span&gt; from \(A\) to \(B\), we raise the # of inhabitants of
\(B\) to the power of the # of inhabitants of \(A\).


## End of Level 4 (corollary)

Hence a curried function is equivalent to its uncurried alternative.

\[\begin{align*}
F_{uncurried}::(A,B) \rightarrow C &amp;amp; \Leftrightarrow C^{A*B} \\
&amp;amp; = C^{B*A} \\
&amp;amp; = (C^B)^A \\
&amp;amp; \Leftrightarrow (B \rightarrow C)^A \\
&amp;amp; \Leftrightarrow F_{curried}::A \rightarrow (B \rightarrow C)
\end{align*}\]


## Victory!


## Equivalences

    template &lt;typename T=&quot;&quot;&gt;
    struct Foo {
      std::variant&amp;lt;T, T&amp;gt; m_v;
    };
    
    template &lt;typename T=&quot;&quot;&gt;
    struct Bar {
      T m_t;
      bool m_b;
    };

We have a choice over how to represent values. `std::variant` will quickly
become a very important tool for proper expression of states.

This is one reason why `std::variant`'s &quot;never-empty&quot; guarantee is important.

&lt;div class=&quot;NOTES&quot;&gt;
T + T = 2T.

But note that in `Bar`, we need to manually keep the two variables &quot;in sync&quot;.

&lt;/div&gt;


## Algebraic Datatypes

This is what it means to have an algebra of datatypes.

-   the ability to reason about equality of types
-   to find equivalent formulations
    -   more natural
    -   more easily understood
    -   more efficient
-   to identify mismatches between state spaces and the types used to implement
    them
-   to eliminate illegal states by making them inexpressible


## Making Illegal States Unrepresentable

`std::variant` is a game changer because it allows us to (more) properly express
types, so that (more) illegal states are unrepresentable.

![img](./variant-tweet.png)

&lt;div class=&quot;NOTES&quot;&gt;
C++'s type system is still not perfect by a long shot. But `std::variant` is an
amazing upgrade.

&lt;/div&gt;


## Making Illegal States Unrepresentable

Let's look at some possible alternative data formulations, using sum types
(`variant`, `optional`) as well as product types (structs).


## Example: Connection State

    enum class ConnectionState {
      DISCONNECTED,
      CONNECTING,
      CONNECTED,
      CONNECTION_INTERRUPTED
    };
    
    struct Connection {
      ConnectionState m_connectionState;
    
      std::string m_serverAddress;
      ConnectionId m_id;
      std::chrono::system_clock::time_point m_connectedTime;
      std::chrono::milliseconds m_lastPingTime;
      Timer m_reconnectTimer;
    };

&lt;div class=&quot;NOTES&quot;&gt;
A very simple example of what a connection class might look like today.

Functions interacting with this class would typically use a switch statement
over the `ConnectionState`.

There are hidden invariants here that aren't enforced by the Connection type.

Some of the fields are dependent on the connection state (reconnect time, last
ping time). So it seems that some of these fields need sentinel values (eg
invalid connection id).

Worse, there is temptation to reuse fields for multiple states. Connected
timestamp is perhaps likely to get reused to mean the instant of connection and
the instant of disconnection.

&lt;/div&gt;


## Example: Connection State

    struct Connection {
      std::string m_serverAddress;
    
      struct Disconnected {};
      struct Connecting {};
      struct Connected {
        ConnectionId m_id;
        std::chrono::system_clock::time_point m_connectedTime;
        std::optional&lt;std::chrono::milliseconds&gt; m_lastPingTime;
      };
      struct ConnectionInterrupted {
        std::chrono::system_clock::time_point m_disconnectedTime;
        Timer m_reconnectTimer;
      };
    
      std::variant&amp;lt;Disconnected,
    	       Connecting,
    	       Connected,
    	       ConnectionInterrupted&amp;gt; m_connection;
    };

&lt;div class=&quot;NOTES&quot;&gt;
With types structured correctly, it's not possible to express illegal states.

e.g. Ping time does not exist if we're not connected.

(There are still things that are common to all states, e.g. perhaps this class
represents connection to a specific server.)

A switch statement could still exist, switching on the `variant`'s `index()`, or
a visitor-based approach could be used.

&lt;/div&gt;


## Example: Nullable field

    class Friend {
      std::string m_alias;
      bool m_aliasPopulated;
      ...
    };

These two fields need to be kept in sync everywhere.

&lt;div class=&quot;NOTES&quot;&gt;
Here, a field is populated from a remote source and happens lazily and/or
asynchronously. It is possible that the field never gets populated.

All the code that deals with this field has to ensure that both variables are
kept up to date in sync with each other.

&lt;/div&gt;


## Example: Nullable field

    class Friend {
      std::optional&lt;std::string&gt; m_alias;
      ...
    };

`std::optional` provides a sentinel value that is outside the type.

&lt;div class=&quot;NOTES&quot;&gt;
`std::optional` captures the true state space of the variable. It is not
possible for two fields to get out of step now.

&lt;/div&gt;


## Example: Monster AI

    enum class AggroState {
      IDLE,
      CHASING,
      FIGHTING
    };
    
    class MonsterAI {
      AggroState m_aggroState;
    
      float m_aggroRadius;
      PlayerId m_target;
      Timer m_chaseTimer;
    };

&lt;div class=&quot;NOTES&quot;&gt;
Once again, presumably PlayerId has some invalid sentinel value.

&lt;/div&gt;


## Example: Monster AI

    class MonsterAI {
      struct Idle {
        float m_aggroRadius;
      };
      struct Chasing {
        PlayerId m_target;
        Timer m_chaseTimer;
      };
      struct Fighting {
        PlayerId m_target;
      };
    
      std::variant&amp;lt;Idle, Chasing, Fighting&amp;gt; m_aggroState;
    };

&lt;div class=&quot;NOTES&quot;&gt;
Now the variables are properly placed into the states that use them.

Chasing and Fighting states could inherit from an Aggroed state that holds a target.

&lt;/div&gt;


## Example: Design Patterns

The addition of sum types to C++ offers an alternative formulation for some
design patterns.

State machines and expressions are naturally modelled with sum types.

&lt;div class=&quot;NOTES&quot;&gt;
Traditional runtime polymorphism approach can lead to bloated base class issue.

Type erasure is another way to go.

Sum types + visitor/pattern matching is a third possibility, particularly
natural for things like ASTs.

&lt;/div&gt;


## Example: Design Patterns

-   Command
-   Composite
-   State
-   Interpreter

&lt;div class=&quot;NOTES&quot;&gt;
Command uses a flat, wide class hierarchy to encapsulate requests in objects.

Composite: model part-whole hierarchies with uniform interface.

State is obvious: simply replace the contained polymorphic object with a
variant.

Sum types are especially good for representing expressions (think JSON).

Interpreter tackles the expression problem: easy to add new classes (use
OO/interfaces) or new operations (use sum types/visitors)?

&lt;/div&gt;


## Designing with Types

`std::variant` and `std::optional` are valuable tools that allow us to model the
state of our business logic more accurately.

When you match the types to the domain accurately, certain categories of tests
just disappear.

&lt;div class=&quot;NOTES&quot;&gt;
You don't have to test the edge cases where the representation can fall outside
your reality - because that can't happen.

&lt;/div&gt;


## Designing with Types

Fitting types to their function more accurately makes code easier to understand
and removes pitfalls.

The bigger the codebase and the more vital the functionality, the more value
there is in correct representation with types.

&lt;div class=&quot;NOTES&quot;&gt;
When illegal states are unrepresentable, you don't have to worry about other
programmers misunderstanding the code, or misusing data. In a sense, they
*cannot* write something that is wrong.

And when I say &quot;other programmers&quot; of course I mean myself in 3 months&amp;#x2026;

Questionably reusing fields, bending semantics, etc. These are bad practices.
But they happen when we're chasing a deadline.

&lt;/div&gt;


## Using Types to Constrain Behaviour

We've seen how an expressive type system (with product and sum types) allows us
to model state more accurately.

&quot;Phantom types&quot; is one technique that helps us to model the *behaviour* of our
business logic in the type system. Illegal behaviour becomes a type error.


## Phantom Types: Before

    std::string GetFormData();
    
    std::string SanitizeFormData(const std::string&amp;amp;);
    
    void ExecuteQuery(const std::string&amp;amp;);

An injection bug waiting to happen.

&lt;div class=&quot;NOTES&quot;&gt;
Let's hope we don't meet little Bobby Tables, and that everywhere we execute a
query we remembered to sanitize the data provided by the user.

The type system is not helping us here. How can we use types to make sure that
we stay safe?

&lt;/div&gt;


## Phantom Types: The setup

    template &lt;typename T=&quot;&quot;&gt;
    struct FormData {
      explicit FormData(const string&amp;amp; input) : m_input(input) {}
      std::string m_input;
    };
    
    struct sanitized {};
    struct unsanitized {};

`T` is the &quot;Phantom Type&quot; here.

&lt;div class=&quot;NOTES&quot;&gt;
Note that the template argument is unused. It exists &lt;span class=&quot;underline&quot;&gt;only&lt;/span&gt; for compile time
type checking. There is no runtime overhead.

&lt;/div&gt;


## Phantom Types: After

    FormData&lt;unsanitized&gt; GetFormData();
    
    std::optional&amp;lt;FormData&lt;sanitized&gt;&amp;gt;
    SanitizeFormData(const FormData&lt;unsanitized&gt;&amp;amp;);
    
    void ExecuteQuery(const FormData&lt;sanitized&gt;&amp;amp;);

&lt;div class=&quot;NOTES&quot;&gt;
User input is born unsanitized.

It is impossible for us to execute unsanitized input. The compiler simply won't
compile it.

We've used types to help enforce the business logic.

This is something similar to a strong typedef, or what enum class effectively
does for integral types. This technique can also be used e.g. in a units
library.

&lt;/div&gt;


## Total Functions

A *total function* is a function that is defined for all inputs in its domain.

`template &lt;typename T=&quot;&quot;&gt;
const T&amp;amp; min(const T&amp;amp; a, const T&amp;amp; b);`

`float sqrt(float f);`

&lt;div class=&quot;NOTES&quot;&gt;
We are straying into the realm of Concepts here.

I'm not saying that total is the same thing as &quot;no preconditions&quot;. The type must
satisfy the requirements on it. But you can see that with functions like `sqrt`
there is a clear mismatch between the type of the function and the actual type
of its domain.

&lt;/div&gt;


## Let's play another game

To help us see how total functions with the right types can result in
unsurprising code.

I'll give you a function signature with no names attached.

You tell me what it's called&amp;#x2026; (and you'll even know how to implement it).

The only rule&amp;#x2026; it must be a *total* function.

&lt;div class=&quot;NOTES&quot;&gt;
Assume regular types. Assume that the function is doing something &quot;interesting&quot;
rather than &quot;boring&quot; when you have a choice. (ie. that it uses its argument).
But you needn't assume anything else.

And there are always ways to make things unexpected in C++. But assume nothing
surprising here.

&lt;/div&gt;


## Name That Function

    template &lt;typename T=&quot;&quot;&gt;
    T f(T);

`identity`

    int f(int);

&lt;div class=&quot;NOTES&quot;&gt;
Note the odd situation here: we know more about `f(T)` than we do about
`f(int)`.

&lt;/div&gt;


## Name That Function

    template &amp;lt;typename T, typename U&amp;gt;
    T f(pair&amp;lt;T, U&amp;gt;);

`first`


## Name That Function

    template &lt;typename T=&quot;&quot;&gt;
    T f(bool, T, T);

`select`


## Name That Function

    template &amp;lt;typename T, typename U&amp;gt;
    U f(function&amp;lt;U(T)&amp;gt;, T);

`apply` or `call`


## Name That Function

    template &lt;typename T=&quot;&quot;&gt;
    vector&lt;T&gt; f(vector&lt;T&gt;);

`reverse`, `shuffle`, &amp;#x2026;

&lt;div class=&quot;NOTES&quot;&gt;
For simplicity, I haven't written this signature in terms of iterators, but it
would be just the same.

&lt;/div&gt;


## Name That Function

    template &lt;typename T=&quot;&quot;&gt;
    T f(vector&lt;T&gt;);

Not possible! It's a partial function - the `vector` might be empty.

    T&amp;amp; vector&lt;T&gt;::front();


## Name That Function

    template &lt;typename T=&quot;&quot;&gt;
    optional&lt;T&gt; f(vector&lt;T&gt;);


## Name That Function

    template &amp;lt;typename T, typename U&amp;gt;
    vector&lt;u&gt; f(function&amp;lt;U(T)&amp;gt;, vector&lt;T&gt;);

`transform`


## Name That Function

    template &lt;typename T=&quot;&quot;&gt;
    vector&lt;T&gt; f(function&amp;lt;bool(T)&amp;gt;, vector&lt;T&gt;);

`remove_if`, `partition`, &amp;#x2026;


## Name That Function

    template &lt;typename T=&quot;&quot;&gt;
    T f(optional&lt;T&gt;);

Not possible!


## Name That Function

    template &amp;lt;typename K, typename V&amp;gt;
    V f(map&amp;lt;K, V&amp;gt;, K);

Not possible! (The key might not be in the `map`.)

    V&amp;amp; map&amp;lt;K, V&amp;gt;::operator[](const K&amp;amp;);


## Name That Function

    template &amp;lt;typename K, typename V&amp;gt;
    optional&lt;V&gt; f(map&amp;lt;K, V&amp;gt;, K);

`lookup`


## What Just Happened?

I gave you *almost nothing*.

No variable names. No function names. No type names.

Just bare type signatures.

You were able to tell me exactly what the functions should be called, and likely
knew instantly how to implement them.

You will note that partial functions gave us some issues&amp;#x2026;

&lt;div class=&quot;NOTES&quot;&gt;
Naming is one of the hardest problems in Comp Sci. Getting the types right is
much easier. And if your types model the logic properly, perhaps you have
&quot;self-documenting code&quot;?

&lt;/div&gt;


## Well-typed Functions

Writing *total functions* with well-typed signatures can tell us a lot about
functionality.

Using types appropriately makes interfaces unsurprising, safer to use and harder
to misuse.

Total functions make more test categories vanish.


## About Testing&amp;#x2026;

In a previous talk, I talked about unit testing and in particular property-based testing.

Effectively using types can reduce test code.

Property-based tests say &quot;for all values, this property is true&quot;.

That is exactly what types *are*: universal quantifications about what can be
done with data.

Types scale better than tests. Instead of TDD, maybe try TDD!

&lt;div class=&quot;NOTES&quot;&gt;
C++'s type system isn't yet powerful enough to be able to say goodbye to tests,
but it is powerful enough that used effectively, we can reduce some of the
drudgery of writing tests.

Any time you're thinking something is true for all values, that's what a type
can do.

&lt;/div&gt;


## Further Down the Rabbit Hole

-   &amp;lt;http://en.wikipedia.org/wiki/Algebraic_data_type&amp;gt;
-   &amp;lt;http://chris-taylor.github.io/blog/2013/02/10/the-algebra-of-algebraic-data-types/&amp;gt;
-   &amp;lt;https://vimeo.com/14313378&amp;gt; (Effective ML: Making Illegal States Unrepresentable)
-   &amp;lt;http://www.infoq.com/presentations/Types-Tests&amp;gt; (Types vs Tests: Strange Loop 2012)


## Thanks For Listening

&quot;On the whole, I'm inclined to say that when in doubt, make a new type.&quot;

&amp;#x2013; Martin Fowler, [*When to Make a Type*](http://martinfowler.com/ieeeSoftware/whenType.pdf)

&quot;Don't set a flag; set the data.&quot;

&amp;#x2013; Leo Brodie, *[Thinking Forth](http://thinking-forth.sourceforge.net/)*


## Goals for Well-typed Code

-   Make illegal states unrepresentable
-   Use `std::variant` and `std::optional` for formulations that
    -   are more natural
    -   fit the business logic state better
-   Use phantom types for safety
    -   Make illegal behaviour a compile error
-   Write total functions
    -   Unsurprising behaviour
    -   Easy to use, hard to misuse


## Epilogue

A taste of algebra with datatypes


## A Taste of Algebra with Datatypes

How many values?

    template &lt;typename T=&quot;&quot;&gt;
    class vector&lt;T&gt;;

We can define a `vector&lt;T&gt;` recursively:

\({v(t)} = {1 + t v(t)}\)

(empty vector or (+) head element and (\*) tail vector)


## A Taste of Algebra with Datatypes

And rearrange&amp;#x2026;

What does that mean? Subtracting and dividing types?


## A Taste of Algebra with Datatypes

When we don't know how to interpret something mathematical?


## A Taste of Algebra with Datatypes

Series expansion at \({t = 0}\):

\({1 + t + t^2 + t^3 + t^4 +{ }...}\)

A `vector&lt;T&gt;` can have:

-   0 elements (\({1}\))
-   or (+) 1 element (\({t}\))
-   or (+) 2 elements (\({t^2}\))
-   etc.


## Goals for Well-typed Code

-   Make illegal states unrepresentable
-   Use `std::variant` and `std::optional` for formulations that
    -   are more natural
    -   fit the business logic state better
-   Use phantom types for safety
    -   Make illegal behaviour a compile error
-   Write total functions
    -   Unsurprising behaviour
    -   Easy to use, hard to misuse

&lt;/T&gt;&lt;/T&gt;&lt;/T&gt;&lt;/typename&gt;&lt;/V&gt;&lt;/T&gt;&lt;/typename&gt;&lt;/T&gt;&lt;/T&gt;&lt;/typename&gt;&lt;/T&gt;&lt;/u&gt;&lt;/T&gt;&lt;/T&gt;&lt;/typename&gt;&lt;/T&gt;&lt;/T&gt;&lt;/typename&gt;&lt;/T&gt;&lt;/T&gt;&lt;/typename&gt;&lt;/typename&gt;&lt;/typename&gt;&lt;/typename&gt;&lt;/sanitized&gt;&lt;/unsanitized&gt;&lt;/sanitized&gt;&lt;/unsanitized&gt;&lt;/typename&gt;&lt;/std::string&gt;&lt;/std::chrono::milliseconds&gt;&lt;/typename&gt;&lt;/typename&gt;&lt;/char&gt;&lt;/typename&gt;&lt;/typename&gt;&lt;/T&gt;&lt;/T&gt;&lt;/section&gt;</content><author><name></name></author><summary type="html"></summary></entry><entry><title type="html">Simple</title><link href="http://localhost:4000/2017/04/05/simple.html" rel="alternate" type="text/html" title="Simple" /><published>2017-04-05T00:00:00-03:00</published><updated>2017-04-05T00:00:00-03:00</updated><id>http://localhost:4000/2017/04/05/simple</id><content type="html" xml:base="http://localhost:4000/2017/04/05/simple.html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;title&gt;Using Types Effectively&lt;/title&gt;
&lt;meta name=&quot;author&quot; content=&quot;(Ben Deane)&quot;/&gt;
&lt;style type=&quot;text/css&quot;&gt;
.underline { text-decoration: underline; }
&lt;/style&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;file:///Users/moyano/Documents/Sandbox/reveal.js-3.4.1/js/reveal.js/css/reveal.css&quot;/&gt;

&lt;link rel=&quot;stylesheet&quot; href=&quot;file:///Users/moyano/Documents/Sandbox/reveal.js-3.4.1/js/reveal.js/css/theme/solarized.css&quot; id=&quot;theme&quot;/&gt;


&lt;!-- If the query includes 'print-pdf', include the PDF print sheet --&gt;
&lt;script&gt;
    if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = 'file:///Users/moyano/Documents/Sandbox/reveal.js-3.4.1/js/reveal.js/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    }
&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div class=&quot;reveal&quot;&gt;
&lt;div class=&quot;slides&quot;&gt;
&lt;section id=&quot;sec-title-slide&quot;&gt;&lt;h1 class=&quot;title&quot;&gt;Using Types Effectively&lt;/h1&gt;&lt;h2 class=&quot;author&quot;&gt;Ben Deane&lt;/h2&gt;&lt;h2 class=&quot;email&quot;&gt;&lt;a href=&quot;mailto:bdeane@blizzard.com&quot;&gt;bdeane@blizzard.com&lt;/a&gt;&lt;/h2&gt;&lt;h2 class=&quot;date&quot;&gt;September 19th, 2016&lt;/h2&gt;
&lt;/section&gt;
---
layout: slide
title:  &quot;using types effectively&quot;
output: revealjs::revealjs_presentation
transition: convex
theme: moon
---

&lt;p&gt;
&amp;lt;section data-markdown&amp;gt;
&lt;/p&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;./presentation.js&quot;&gt;&lt;/script&gt;
&lt;section&gt;
&lt;section id=&quot;slide-org217101d&quot;&gt;
&lt;h2 id=&quot;org217101d&quot;&gt;Using Types Effectively?&lt;/h2&gt;
&lt;p&gt;
&amp;lt;/section&amp;gt;
&amp;lt;section data-markdown&amp;gt;
&lt;/p&gt;
&lt;/section&gt;
&lt;section id=&quot;slide-org4cbeb03&quot;&gt;
&lt;h3 id=&quot;org4cbeb03&quot;&gt;What does that mean?&lt;/h3&gt;
&lt;br/&gt;
&lt;p&gt;
The recent evolution of C++ is (from one point of view) largely about
&lt;b&gt;strengthening&lt;/b&gt; and &lt;b&gt;expanding&lt;/b&gt; the &lt;b&gt;capabilities for dealing with types&lt;/b&gt;.
&lt;/p&gt;

&lt;ul&gt;
&lt;li class=&quot;fragment appear&quot;&gt;expansion of &lt;code&gt;type_traits&lt;/code&gt;&lt;/li&gt;
&lt;li class=&quot;fragment appear&quot;&gt;&lt;code&gt;decltype&lt;/code&gt; to utter types&lt;/li&gt;
&lt;li class=&quot;fragment appear&quot;&gt;&lt;code&gt;auto&lt;/code&gt; to preserve types, prevent conversions, infer return types&lt;/li&gt;
&lt;li class=&quot;fragment appear&quot;&gt;&lt;code&gt;nullptr&lt;/code&gt; to prevent &lt;code&gt;int&lt;/code&gt; / pointer confusion&lt;/li&gt;
&lt;li class=&quot;fragment appear&quot;&gt;scoped &lt;code&gt;enum&lt;/code&gt;&lt;/li&gt;
&lt;li class=&quot;fragment appear&quot;&gt;GSL: &lt;code&gt;owner&amp;lt;T&amp;gt;&lt;/code&gt;, &lt;code&gt;not_null&amp;lt;T&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;li class=&quot;fragment appear&quot;&gt;Concepts TS&lt;/li&gt;

&lt;/ul&gt;

&lt;aside class=&quot;notes&quot;&gt;
&lt;p&gt;
Some of the features added to modern C++ to deal with types.
&lt;/p&gt;

&lt;p&gt;
Obviously someone thinks that types are important. And the ability to wrangle
them and mould them to our purposes is an important part of C++.
&lt;/p&gt;

&lt;p&gt;
Types are the currency of metaprogramming, but also important for safety in
&quot;regular&quot; programming; hence we see things like the GSL's &lt;code&gt;owner&amp;lt;&amp;gt;&lt;/code&gt; and &lt;code&gt;not_null&amp;lt;&amp;gt;&lt;/code&gt;.
&lt;/p&gt;

&lt;/aside&gt;
&lt;p&gt;
&amp;lt;section data-markdown&amp;gt;
&lt;/p&gt;


&lt;/section&gt;
&lt;section id=&quot;slide-orgfe0bb8d&quot;&gt;
&lt;h3 id=&quot;orgfe0bb8d&quot;&gt;FP isn't (only) about&lt;/h3&gt;
&lt;br/&gt;
&lt;ul&gt;
&lt;li class=&quot;fragment appear&quot;&gt;first class functions&lt;/li&gt;
&lt;li class=&quot;fragment appear&quot;&gt;higher order functions&lt;/li&gt;
&lt;li class=&quot;fragment appear&quot;&gt;lexical scoping, closures&lt;/li&gt;
&lt;li class=&quot;fragment appear&quot;&gt;pattern matching&lt;/li&gt;
&lt;li class=&quot;fragment appear&quot;&gt;value semantics&lt;/li&gt;
&lt;li class=&quot;fragment appear&quot;&gt;immutability&lt;/li&gt;
&lt;li class=&quot;fragment appear&quot;&gt;concurrency through immutability&lt;/li&gt;
&lt;li class=&quot;fragment appear&quot;&gt;laziness&lt;/li&gt;
&lt;li class=&quot;fragment appear&quot;&gt;garbage collection&lt;/li&gt;
&lt;li class=&quot;fragment appear&quot;&gt;boxed data types / &quot;inefficient&quot; runtime models&lt;/li&gt;
&lt;li class=&quot;fragment appear&quot;&gt;the M-word&lt;/li&gt;

&lt;/ul&gt;

&lt;aside class=&quot;notes&quot;&gt;
&lt;p&gt;
Functional languages can teach us a thing or two about types. (After all, they
seem to be teaching us everything else.)
&lt;/p&gt;

&lt;p&gt;
Here are some things you may think of when functional programming is mentioned&amp;#x2026;
&lt;/p&gt;

&lt;/aside&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-orgac3bc19&quot;&gt;
&lt;h3 id=&quot;orgac3bc19&quot;&gt;FP is (also, importantly) about&lt;/h3&gt;
&lt;br/&gt;
&lt;ul&gt;
&lt;li class=&quot;fragment appear&quot;&gt;using types effectively and expressively&lt;/li&gt;
&lt;li class=&quot;fragment appear&quot;&gt;making illegal states unrepresentable&lt;/li&gt;
&lt;li class=&quot;fragment appear&quot;&gt;making illegal behaviour result in a type error&lt;/li&gt;
&lt;li class=&quot;fragment appear&quot;&gt;using total functions for easier to use, harder to misuse interfaces&lt;/li&gt;

&lt;/ul&gt;

&lt;aside class=&quot;notes&quot;&gt;
&lt;p&gt;
These aspects of functional programming are often overlooked.
&lt;/p&gt;

&lt;p&gt;
Many functional languages have well-developed, expressive type systems.
&lt;/p&gt;

&lt;p&gt;
C++ is moving in that direction.
&lt;/p&gt;

&lt;/aside&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-orgd143b41&quot;&gt;
&lt;h3 id=&quot;orgd143b41&quot;&gt;What is a type?&lt;/h3&gt;
&lt;br/&gt;
&lt;ul&gt;
&lt;li class=&quot;fragment appear&quot;&gt;A way for the compiler to know what opcodes to output (dmr's motivation)?&lt;/li&gt;
&lt;li class=&quot;fragment appear&quot;&gt;The way data is stored (representational)?&lt;/li&gt;
&lt;li class=&quot;fragment appear&quot;&gt;Characterised by what operations are possible (behavioural)?&lt;/li&gt;
&lt;li class=&quot;fragment appear&quot;&gt;Determines the values that can be assigned?&lt;/li&gt;
&lt;li class=&quot;fragment appear&quot;&gt;Determines the meaning of the data?&lt;/li&gt;

&lt;/ul&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org0d55d57&quot;&gt;
&lt;h3 id=&quot;org0d55d57&quot;&gt;What is a type?&lt;/h3&gt;

&lt;div class=&quot;figure&quot;&gt;
&lt;p&gt;&lt;img src=&quot;./int_bool_1.png&quot; alt=&quot;int_bool_1.png&quot; /&gt;
&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;
&quot;Only Lua would have '&lt;code&gt;1 == true&lt;/code&gt;' evaluate to &lt;code&gt;false&lt;/code&gt;. #wantmydayback&quot;
&lt;/p&gt;

&lt;div class=&quot;fragment appear&quot;&gt;

&lt;div class=&quot;figure&quot;&gt;
&lt;p&gt;&lt;img src=&quot;./int_bool_2.png&quot; alt=&quot;int_bool_2.png&quot; /&gt;
&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;
&quot;But, how can &lt;code&gt;1&lt;/code&gt; be equal to &lt;code&gt;true&lt;/code&gt;? &lt;code&gt;1&lt;/code&gt; is an integer, and &lt;code&gt;true&lt;/code&gt; is a boolean. Lua
seems to be correct here. It's your view of the world that has been warped.&quot;
&lt;/p&gt;

&lt;p&gt;
(Smiley faces make criticism OK!)
&lt;/p&gt;
&lt;/div&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org6019d6f&quot;&gt;
&lt;h3 id=&quot;org6019d6f&quot;&gt;What is a type?&lt;/h3&gt;
&lt;br/&gt;
&lt;ul&gt;
&lt;li class=&quot;fragment appear&quot;&gt;The set of values that can inhabit an expression
&lt;ul&gt;
&lt;li&gt;may be finite or &quot;infinite&quot;&lt;/li&gt;
&lt;li&gt;characterized by cardinality&lt;/li&gt;

&lt;/ul&gt;&lt;/li&gt;
&lt;li class=&quot;fragment appear&quot;&gt;Expressions have types
&lt;ul&gt;
&lt;li&gt;A program has a type&lt;/li&gt;

&lt;/ul&gt;&lt;/li&gt;

&lt;/ul&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org5d8a589&quot;&gt;
&lt;h3 id=&quot;org5d8a589&quot;&gt;Let's play a game&lt;/h3&gt;
&lt;p class=&quot;fragment appear&quot;&gt;
To help us get thinking about types.
&lt;/p&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
I'll tell you a type.
&lt;/p&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
You tell me how many values it has.
&lt;/p&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
There are no tricks: if it seems obvious, it is!
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org94318c8&quot;&gt;
&lt;h3 id=&quot;org94318c8&quot;&gt;Level 1&lt;/h3&gt;
&lt;br/&gt;
&lt;p&gt;
Types as sets of values
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org925e476&quot;&gt;
&lt;h3 id=&quot;org925e476&quot;&gt;Level 1&lt;/h3&gt;
&lt;p&gt;
How many values?
&lt;/p&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-cpp&quot;&gt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;bool&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
2 (&lt;code&gt;true&lt;/code&gt; and &lt;code&gt;false&lt;/code&gt;)
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org655cc7c&quot;&gt;
&lt;h3 id=&quot;org655cc7c&quot;&gt;Level 1&lt;/h3&gt;
&lt;p&gt;
How many values?
&lt;/p&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-cpp&quot;&gt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;char&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
256
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org4628efd&quot;&gt;
&lt;h3 id=&quot;org4628efd&quot;&gt;Level 1&lt;/h3&gt;
&lt;p&gt;
How many values?
&lt;/p&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-cpp&quot;&gt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;void&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
0
&lt;/p&gt;

&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;fragment appear&quot;&gt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;struct&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;Foo&lt;/span&gt; { &lt;span style=&quot;color: #e78c45;&quot;&gt;Foo&lt;/span&gt;() = &lt;span style=&quot;color: #b9ca4a;&quot;&gt;delete&lt;/span&gt;; };
&lt;/pre&gt;
&lt;/div&gt;

&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;fragment appear&quot;&gt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;struct&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;Bar&lt;/span&gt; { &lt;span style=&quot;color: #b9ca4a;&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;typename&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;&amp;gt; &lt;span style=&quot;color: #e78c45;&quot;&gt;Bar&lt;/span&gt;(); };
&lt;/pre&gt;
&lt;/div&gt;

&lt;aside class=&quot;notes&quot;&gt;
&lt;p&gt;
cf BASIC's function vs procedure
&lt;/p&gt;

&lt;/aside&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org9b278f3&quot;&gt;
&lt;h3 id=&quot;org9b278f3&quot;&gt;Level 1&lt;/h3&gt;
&lt;p&gt;
How many values?
&lt;/p&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-cpp&quot;&gt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;struct&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;Foo&lt;/span&gt; {};
&lt;/pre&gt;
&lt;/div&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
1
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-orgf7493c9&quot;&gt;
&lt;h3 id=&quot;orgf7493c9&quot;&gt;Level 1&lt;/h3&gt;
&lt;p&gt;
How many values?
&lt;/p&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-cpp&quot;&gt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;enum&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;FireSwampDangers&lt;/span&gt; : int8_t {
  &lt;span style=&quot;color: #e7c547;&quot;&gt;FLAME_SPURTS&lt;/span&gt;,
  &lt;span style=&quot;color: #e7c547;&quot;&gt;LIGHTNING_SAND&lt;/span&gt;,
  &lt;span style=&quot;color: #e7c547;&quot;&gt;ROUSES&lt;/span&gt;
};
&lt;/pre&gt;
&lt;/div&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
3
&lt;/p&gt;

&lt;aside class=&quot;notes&quot;&gt;
&lt;p&gt;
It is possible to put something into FireSwampDangers that fits
representationally (eg. the value 4). But that would be meaningless: there would
be no connection between the value represented and its interpretation. Because
there is no interpretation: cf. an unconstructed object.
&lt;/p&gt;

&lt;/aside&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org00e51b2&quot;&gt;
&lt;h3 id=&quot;org00e51b2&quot;&gt;Level 1&lt;/h3&gt;
&lt;p&gt;
How many values?
&lt;/p&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-cpp&quot;&gt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;typename&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;&amp;gt;
&lt;span style=&quot;color: #b9ca4a;&quot;&gt;struct&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;Foo&lt;/span&gt; {
  &lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt; &lt;span style=&quot;color: #e7c547;&quot;&gt;m_t&lt;/span&gt;;
};
&lt;/pre&gt;
&lt;/div&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
&lt;code&gt;Foo&lt;/code&gt; has as many values as &lt;code&gt;T&lt;/code&gt;
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org025dcfe&quot;&gt;
&lt;h3 id=&quot;org025dcfe&quot;&gt;End of Level 1&lt;/h3&gt;
&lt;p&gt;
Algebraically, a type is the number of values that inhabit it.
&lt;/p&gt;

&lt;p&gt;
These types are equivalent:
&lt;/p&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-cpp&quot;&gt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;bool&lt;/span&gt;;

&lt;span style=&quot;color: #b9ca4a;&quot;&gt;enum&lt;/span&gt; &lt;span style=&quot;color: #b9ca4a;&quot;&gt;class&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;InatorButtons&lt;/span&gt; {
  &lt;span style=&quot;color: #e7c547;&quot;&gt;ON_OFF&lt;/span&gt;,
  &lt;span style=&quot;color: #e7c547;&quot;&gt;SELF_DESTRUCT&lt;/span&gt;
};
&lt;/pre&gt;
&lt;/div&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
Let's move on to level 2.
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org813ff65&quot;&gt;
&lt;h3 id=&quot;org813ff65&quot;&gt;Level 2&lt;/h3&gt;
&lt;br/&gt;
&lt;p&gt;
Aggregating Types
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org66efc3f&quot;&gt;
&lt;h3 id=&quot;org66efc3f&quot;&gt;Level 2&lt;/h3&gt;
&lt;p&gt;
How many values?
&lt;/p&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-cpp&quot;&gt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;std&lt;/span&gt;::&lt;span style=&quot;color: #7aa6da;&quot;&gt;pair&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;char&lt;/span&gt;, &lt;span style=&quot;color: #7aa6da;&quot;&gt;bool&lt;/span&gt;&amp;gt;;
&lt;/pre&gt;
&lt;/div&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
256 * 2 = 512
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org8faf6b9&quot;&gt;
&lt;h3 id=&quot;org8faf6b9&quot;&gt;Level 2&lt;/h3&gt;
&lt;p&gt;
How many values?
&lt;/p&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-cpp&quot;&gt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;struct&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;Foo&lt;/span&gt; {
  &lt;span style=&quot;color: #7aa6da;&quot;&gt;char&lt;/span&gt; &lt;span style=&quot;color: #e7c547;&quot;&gt;a&lt;/span&gt;;
  &lt;span style=&quot;color: #7aa6da;&quot;&gt;bool&lt;/span&gt; &lt;span style=&quot;color: #e7c547;&quot;&gt;b&lt;/span&gt;;
};
&lt;/pre&gt;
&lt;/div&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
256 * 2 = 512
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org7563b88&quot;&gt;
&lt;h3 id=&quot;org7563b88&quot;&gt;Level 2&lt;/h3&gt;
&lt;p&gt;
How many values?
&lt;/p&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-cpp&quot;&gt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;std&lt;/span&gt;::&lt;span style=&quot;color: #7aa6da;&quot;&gt;tuple&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;bool&lt;/span&gt;, &lt;span style=&quot;color: #7aa6da;&quot;&gt;bool&lt;/span&gt;, &lt;span style=&quot;color: #7aa6da;&quot;&gt;bool&lt;/span&gt;&amp;gt;;
&lt;/pre&gt;
&lt;/div&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
2 * 2 * 2 = 8
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org4ead90e&quot;&gt;
&lt;h3 id=&quot;org4ead90e&quot;&gt;Level 2&lt;/h3&gt;
&lt;p&gt;
How many values?
&lt;/p&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-cpp&quot;&gt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;typename&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;, &lt;span style=&quot;color: #b9ca4a;&quot;&gt;typename&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;U&lt;/span&gt;&amp;gt;
&lt;span style=&quot;color: #b9ca4a;&quot;&gt;struct&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;Foo&lt;/span&gt; {
  &lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt; &lt;span style=&quot;color: #e7c547;&quot;&gt;m_t&lt;/span&gt;;
  &lt;span style=&quot;color: #7aa6da;&quot;&gt;U&lt;/span&gt; &lt;span style=&quot;color: #e7c547;&quot;&gt;m_u&lt;/span&gt;;
};
&lt;/pre&gt;
&lt;/div&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
(# of values in &lt;code&gt;T&lt;/code&gt;) * (# of values in &lt;code&gt;U&lt;/code&gt;)
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org3adf797&quot;&gt;
&lt;h3 id=&quot;org3adf797&quot;&gt;End of Level 2&lt;/h3&gt;
&lt;p&gt;
When two types are &quot;concatenated&quot; into one compound type, we &lt;span class=&quot;underline&quot;&gt;multiply&lt;/span&gt; the # of
inhabitants of the components.
&lt;/p&gt;

&lt;p&gt;
This kind of compounding gives us a &lt;span class=&quot;underline&quot;&gt;product type&lt;/span&gt;.
&lt;/p&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
On to Level 3.
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-orga10a83e&quot;&gt;
&lt;h3 id=&quot;orga10a83e&quot;&gt;Level 3&lt;/h3&gt;
&lt;br/&gt;
&lt;p&gt;
Alternating Types
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-orgd5ee2bb&quot;&gt;
&lt;h3 id=&quot;orgd5ee2bb&quot;&gt;Level 3&lt;/h3&gt;
&lt;p&gt;
How many values?
&lt;/p&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-cpp&quot;&gt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;std&lt;/span&gt;::&lt;span style=&quot;color: #7aa6da;&quot;&gt;optional&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;char&lt;/span&gt;&amp;gt;;
&lt;/pre&gt;
&lt;/div&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
256 + 1 = 257
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org5f028f2&quot;&gt;
&lt;h3 id=&quot;org5f028f2&quot;&gt;Level 3&lt;/h3&gt;
&lt;p&gt;
How many values?
&lt;/p&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-cpp&quot;&gt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;std&lt;/span&gt;::&lt;span style=&quot;color: #7aa6da;&quot;&gt;variant&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;char&lt;/span&gt;, &lt;span style=&quot;color: #7aa6da;&quot;&gt;bool&lt;/span&gt;&amp;gt;;
&lt;/pre&gt;
&lt;/div&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
256 + 2 = 258
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org106043d&quot;&gt;
&lt;h3 id=&quot;org106043d&quot;&gt;Level 3&lt;/h3&gt;
&lt;p&gt;
How many values?
&lt;/p&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-cpp&quot;&gt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;typename&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;, &lt;span style=&quot;color: #b9ca4a;&quot;&gt;typename&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;U&lt;/span&gt;&amp;gt;
&lt;span style=&quot;color: #b9ca4a;&quot;&gt;struct&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;Foo&lt;/span&gt; {
  &lt;span style=&quot;color: #7aa6da;&quot;&gt;std&lt;/span&gt;::&lt;span style=&quot;color: #7aa6da;&quot;&gt;variant&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;, &lt;span style=&quot;color: #7aa6da;&quot;&gt;U&lt;/span&gt;&amp;gt;;
}
&lt;/pre&gt;
&lt;/div&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
(# of values in &lt;code&gt;T&lt;/code&gt;) + (# of values in &lt;code&gt;U&lt;/code&gt;)
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org5394d59&quot;&gt;
&lt;h3 id=&quot;org5394d59&quot;&gt;End of Level 3&lt;/h3&gt;
&lt;p&gt;
When two types are &quot;alternated&quot; into one compound type, we &lt;span class=&quot;underline&quot;&gt;add&lt;/span&gt; the # of
inhabitants of the components.
&lt;/p&gt;

&lt;p&gt;
This kind of compounding gives us a &lt;span class=&quot;underline&quot;&gt;sum type&lt;/span&gt;.
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org7ec5f3c&quot;&gt;
&lt;h3 id=&quot;org7ec5f3c&quot;&gt;Level 4&lt;/h3&gt;
&lt;br/&gt;
&lt;p&gt;
Function Types
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-orgf47755f&quot;&gt;
&lt;h3 id=&quot;orgf47755f&quot;&gt;Level 4&lt;/h3&gt;
&lt;p&gt;
How many values?
&lt;/p&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-c++&quot;&gt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;bool&lt;/span&gt; &lt;span style=&quot;color: #e78c45;&quot;&gt;f&lt;/span&gt;(&lt;span style=&quot;color: #7aa6da;&quot;&gt;bool&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
4
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org902f8ad&quot;&gt;
&lt;h3 id=&quot;org902f8ad&quot;&gt;Level 4&lt;/h3&gt;
&lt;p&gt;
Four possible values
 &lt;object type=&quot;image/svg+xml&quot; data=&quot;./function_bool.svg&quot; class=&quot;org-svg&quot;&gt;
Sorry, your browser does not support SVG.&lt;/object&gt;
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-orgce4a1d4&quot;&gt;
&lt;h3 id=&quot;orgce4a1d4&quot;&gt;Level 4&lt;/h3&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-c++&quot;&gt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;bool&lt;/span&gt; &lt;span style=&quot;color: #e78c45;&quot;&gt;f1&lt;/span&gt;(&lt;span style=&quot;color: #7aa6da;&quot;&gt;bool&lt;/span&gt; &lt;span style=&quot;color: #e7c547;&quot;&gt;b&lt;/span&gt;) { &lt;span style=&quot;color: #b9ca4a;&quot;&gt;return&lt;/span&gt; b; }
&lt;span style=&quot;color: #7aa6da;&quot;&gt;bool&lt;/span&gt; &lt;span style=&quot;color: #e78c45;&quot;&gt;f2&lt;/span&gt;(&lt;span style=&quot;color: #7aa6da;&quot;&gt;bool&lt;/span&gt;) { &lt;span style=&quot;color: #b9ca4a;&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;true&lt;/span&gt;; }
&lt;span style=&quot;color: #7aa6da;&quot;&gt;bool&lt;/span&gt; &lt;span style=&quot;color: #e78c45;&quot;&gt;f3&lt;/span&gt;(&lt;span style=&quot;color: #7aa6da;&quot;&gt;bool&lt;/span&gt;) { &lt;span style=&quot;color: #b9ca4a;&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;false&lt;/span&gt;; }
&lt;span style=&quot;color: #7aa6da;&quot;&gt;bool&lt;/span&gt; &lt;span style=&quot;color: #e78c45;&quot;&gt;f4&lt;/span&gt;(&lt;span style=&quot;color: #7aa6da;&quot;&gt;bool&lt;/span&gt; &lt;span style=&quot;color: #e7c547;&quot;&gt;b&lt;/span&gt;) { &lt;span style=&quot;color: #b9ca4a;&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;!&lt;/span&gt;b; }
&lt;/pre&gt;
&lt;/div&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org7a4dc1b&quot;&gt;
&lt;h3 id=&quot;org7a4dc1b&quot;&gt;Level 4&lt;/h3&gt;
&lt;p&gt;
How many values?
&lt;/p&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-c++&quot;&gt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;char&lt;/span&gt; &lt;span style=&quot;color: #e78c45;&quot;&gt;f&lt;/span&gt;(&lt;span style=&quot;color: #7aa6da;&quot;&gt;bool&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
256 * 256 = 65,536
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org7c4982d&quot;&gt;
&lt;h3 id=&quot;org7c4982d&quot;&gt;Level 4&lt;/h3&gt;
&lt;p&gt;
How many values (for &lt;code&gt;f&lt;/code&gt;)?
&lt;/p&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-c++&quot;&gt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;enum&lt;/span&gt; &lt;span style=&quot;color: #b9ca4a;&quot;&gt;class&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;Foo&lt;/span&gt;
{
  &lt;span style=&quot;color: #e7c547;&quot;&gt;BAR&lt;/span&gt;,
  &lt;span style=&quot;color: #e7c547;&quot;&gt;BAZ&lt;/span&gt;,
  &lt;span style=&quot;color: #e7c547;&quot;&gt;QUUX&lt;/span&gt;
};
&lt;span style=&quot;color: #7aa6da;&quot;&gt;char&lt;/span&gt; &lt;span style=&quot;color: #e78c45;&quot;&gt;f&lt;/span&gt;(&lt;span style=&quot;color: #7aa6da;&quot;&gt;Foo&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
256 * 256 * 256 = 16,777,216
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-orgc7975d7&quot;&gt;
&lt;h3 id=&quot;orgc7975d7&quot;&gt;Level 4&lt;/h3&gt;
&lt;p&gt;
The number of values of a function is the number of different ways we can draw
arrows between the inputs and the outputs.
 &lt;object type=&quot;image/svg+xml&quot; data=&quot;./function.svg&quot; class=&quot;org-svg&quot;&gt;
Sorry, your browser does not support SVG.&lt;/object&gt;
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org6d674b3&quot;&gt;
&lt;h3 id=&quot;org6d674b3&quot;&gt;Level 4&lt;/h3&gt;
&lt;p&gt;
How many values?
&lt;/p&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-c++&quot;&gt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;class&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;, &lt;span style=&quot;color: #b9ca4a;&quot;&gt;class&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;U&lt;/span&gt;&amp;gt;
&lt;span style=&quot;color: #7aa6da;&quot;&gt;U&lt;/span&gt; &lt;span style=&quot;color: #e78c45;&quot;&gt;f&lt;/span&gt;(&lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
\(|U|^{|T|}\)
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org5383776&quot;&gt;
&lt;h3 id=&quot;org5383776&quot;&gt;End of Level 4&lt;/h3&gt;
&lt;p&gt;
When we have a &lt;span class=&quot;underline&quot;&gt;function&lt;/span&gt; from \(A\) to \(B\), we raise the # of inhabitants of
\(B\) to the power of the # of inhabitants of \(A\).
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org382e4be&quot;&gt;
&lt;h3 id=&quot;org382e4be&quot;&gt;End of Level 4 (corollary)&lt;/h3&gt;
&lt;p&gt;
Hence a curried function is equivalent to its uncurried alternative.
&lt;/p&gt;


&lt;p&gt;
\[\begin{align*}
F_{uncurried}::(A,B) \rightarrow C &amp; \Leftrightarrow C^{A*B} \\
&amp; = C^{B*A} \\
&amp; = (C^B)^A \\
&amp; \Leftrightarrow (B \rightarrow C)^A \\
&amp; \Leftrightarrow F_{curried}::A \rightarrow (B \rightarrow C)
\end{align*}\]
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-orgea11880&quot;&gt;
&lt;h3 id=&quot;orgea11880&quot;&gt;Victory!&lt;/h3&gt;
&lt;br/&gt;&lt;br/&gt;&lt;div id=&quot;achv&quot;&gt;&lt;div class=&quot;achievement-banner&quot;&gt;&lt;div class=&quot;achievement-icon&quot;&gt;&lt;span class=&quot;icon&quot;&gt;&lt;span class=&quot;icon-trophy&quot;&gt;&amp;#127942;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;achievement-text&quot;&gt;&lt;p class=&quot;achievement-notification&quot;&gt;ACHIEVEMENT UNLOCKED&lt;/p&gt;&lt;p class=&quot;achievement-name&quot;&gt;Algebraic Datatypes 101&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org8f0a3f0&quot;&gt;
&lt;h3 id=&quot;org8f0a3f0&quot;&gt;Equivalences&lt;/h3&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-cpp&quot;&gt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;typename&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;&amp;gt;
&lt;span style=&quot;color: #b9ca4a;&quot;&gt;struct&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;Foo&lt;/span&gt; {
  &lt;span style=&quot;color: #7aa6da;&quot;&gt;std&lt;/span&gt;::&lt;span style=&quot;color: #7aa6da;&quot;&gt;variant&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;, &lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;&amp;gt; &lt;span style=&quot;color: #e7c547;&quot;&gt;m_v&lt;/span&gt;;
};

&lt;span style=&quot;color: #b9ca4a;&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;typename&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;&amp;gt;
&lt;span style=&quot;color: #b9ca4a;&quot;&gt;struct&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;Bar&lt;/span&gt; {
  &lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt; &lt;span style=&quot;color: #e7c547;&quot;&gt;m_t&lt;/span&gt;;
  &lt;span style=&quot;color: #7aa6da;&quot;&gt;bool&lt;/span&gt; &lt;span style=&quot;color: #e7c547;&quot;&gt;m_b&lt;/span&gt;;
};
&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;
We have a choice over how to represent values. &lt;code&gt;std::variant&lt;/code&gt; will quickly
become a very important tool for proper expression of states.
&lt;/p&gt;

&lt;p&gt;
This is one reason why &lt;code&gt;std::variant&lt;/code&gt;'s &quot;never-empty&quot; guarantee is important.
&lt;/p&gt;

&lt;aside class=&quot;notes&quot;&gt;
&lt;p&gt;
T + T = 2T.
&lt;/p&gt;

&lt;p&gt;
But note that in &lt;code&gt;Bar&lt;/code&gt;, we need to manually keep the two variables &quot;in sync&quot;.
&lt;/p&gt;

&lt;/aside&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org5bc18a2&quot;&gt;
&lt;h3 id=&quot;org5bc18a2&quot;&gt;Algebraic Datatypes&lt;/h3&gt;
&lt;p&gt;
This is what it means to have an algebra of datatypes.
&lt;/p&gt;

&lt;ul&gt;
&lt;li class=&quot;fragment appear&quot;&gt;the ability to reason about equality of types&lt;/li&gt;
&lt;li class=&quot;fragment appear&quot;&gt;to find equivalent formulations
&lt;ul&gt;
&lt;li&gt;more natural&lt;/li&gt;
&lt;li&gt;more easily understood&lt;/li&gt;
&lt;li&gt;more efficient&lt;/li&gt;

&lt;/ul&gt;&lt;/li&gt;
&lt;li class=&quot;fragment appear&quot;&gt;to identify mismatches between state spaces and the types used to implement
them&lt;/li&gt;
&lt;li class=&quot;fragment appear&quot;&gt;to eliminate illegal states by making them inexpressible&lt;/li&gt;

&lt;/ul&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org566ed19&quot;&gt;
&lt;h3 id=&quot;org566ed19&quot;&gt;Making Illegal States Unrepresentable&lt;/h3&gt;
&lt;p&gt;
&lt;code&gt;std::variant&lt;/code&gt; is a game changer because it allows us to (more) properly express
types, so that (more) illegal states are unrepresentable.
&lt;/p&gt;


&lt;div class=&quot;figure&quot;&gt;
&lt;p&gt;&lt;img src=&quot;./variant-tweet.png&quot; alt=&quot;variant-tweet.png&quot; /&gt;
&lt;/p&gt;
&lt;/div&gt;

&lt;aside class=&quot;notes&quot;&gt;
&lt;p&gt;
C++'s type system is still not perfect by a long shot. But &lt;code&gt;std::variant&lt;/code&gt; is an
amazing upgrade.
&lt;/p&gt;

&lt;/aside&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-orge1ed511&quot;&gt;
&lt;h3 id=&quot;orge1ed511&quot;&gt;Making Illegal States Unrepresentable&lt;/h3&gt;
&lt;p&gt;
Let's look at some possible alternative data formulations, using sum types
(&lt;code&gt;variant&lt;/code&gt;, &lt;code&gt;optional&lt;/code&gt;) as well as product types (structs).
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org4025972&quot;&gt;
&lt;h3 id=&quot;org4025972&quot;&gt;Example: Connection State&lt;/h3&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-cpp&quot;&gt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;enum&lt;/span&gt; &lt;span style=&quot;color: #b9ca4a;&quot;&gt;class&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;ConnectionState&lt;/span&gt; {
  &lt;span style=&quot;color: #e7c547;&quot;&gt;DISCONNECTED&lt;/span&gt;,
  &lt;span style=&quot;color: #e7c547;&quot;&gt;CONNECTING&lt;/span&gt;,
  &lt;span style=&quot;color: #e7c547;&quot;&gt;CONNECTED&lt;/span&gt;,
  &lt;span style=&quot;color: #e7c547;&quot;&gt;CONNECTION_INTERRUPTED&lt;/span&gt;
};

&lt;span style=&quot;color: #b9ca4a;&quot;&gt;struct&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;Connection&lt;/span&gt; {
  &lt;span style=&quot;color: #7aa6da;&quot;&gt;ConnectionState&lt;/span&gt; &lt;span style=&quot;color: #e7c547;&quot;&gt;m_connectionState&lt;/span&gt;;

  &lt;span style=&quot;color: #7aa6da;&quot;&gt;std&lt;/span&gt;::&lt;span style=&quot;color: #7aa6da;&quot;&gt;string&lt;/span&gt; &lt;span style=&quot;color: #e7c547;&quot;&gt;m_serverAddress&lt;/span&gt;;
  &lt;span style=&quot;color: #7aa6da;&quot;&gt;ConnectionId&lt;/span&gt; &lt;span style=&quot;color: #e7c547;&quot;&gt;m_id&lt;/span&gt;;
  &lt;span style=&quot;color: #7aa6da;&quot;&gt;std&lt;/span&gt;::&lt;span style=&quot;color: #7aa6da;&quot;&gt;chrono&lt;/span&gt;::&lt;span style=&quot;color: #7aa6da;&quot;&gt;system_clock&lt;/span&gt;::&lt;span style=&quot;color: #7aa6da;&quot;&gt;time_point&lt;/span&gt; &lt;span style=&quot;color: #e7c547;&quot;&gt;m_connectedTime&lt;/span&gt;;
  &lt;span style=&quot;color: #7aa6da;&quot;&gt;std&lt;/span&gt;::&lt;span style=&quot;color: #7aa6da;&quot;&gt;chrono&lt;/span&gt;::&lt;span style=&quot;color: #7aa6da;&quot;&gt;milliseconds&lt;/span&gt; &lt;span style=&quot;color: #e7c547;&quot;&gt;m_lastPingTime&lt;/span&gt;;
  &lt;span style=&quot;color: #7aa6da;&quot;&gt;Timer&lt;/span&gt; &lt;span style=&quot;color: #e7c547;&quot;&gt;m_reconnectTimer&lt;/span&gt;;
};
&lt;/pre&gt;
&lt;/div&gt;

&lt;aside class=&quot;notes&quot;&gt;
&lt;p&gt;
A very simple example of what a connection class might look like today.
&lt;/p&gt;

&lt;p&gt;
Functions interacting with this class would typically use a switch statement
over the &lt;code&gt;ConnectionState&lt;/code&gt;.
&lt;/p&gt;

&lt;p&gt;
There are hidden invariants here that aren't enforced by the Connection type.
&lt;/p&gt;

&lt;p&gt;
Some of the fields are dependent on the connection state (reconnect time, last
ping time). So it seems that some of these fields need sentinel values (eg
invalid connection id).
&lt;/p&gt;

&lt;p&gt;
Worse, there is temptation to reuse fields for multiple states. Connected
timestamp is perhaps likely to get reused to mean the instant of connection and
the instant of disconnection.
&lt;/p&gt;

&lt;/aside&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-orgb85cd37&quot;&gt;
&lt;h3 id=&quot;orgb85cd37&quot;&gt;Example: Connection State&lt;/h3&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-cpp&quot;&gt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;struct&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;Connection&lt;/span&gt; {
  &lt;span style=&quot;color: #7aa6da;&quot;&gt;std&lt;/span&gt;::&lt;span style=&quot;color: #7aa6da;&quot;&gt;string&lt;/span&gt; &lt;span style=&quot;color: #e7c547;&quot;&gt;m_serverAddress&lt;/span&gt;;

  &lt;span style=&quot;color: #b9ca4a;&quot;&gt;struct&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;Disconnected&lt;/span&gt; {};
  &lt;span style=&quot;color: #b9ca4a;&quot;&gt;struct&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;Connecting&lt;/span&gt; {};
  &lt;span style=&quot;color: #b9ca4a;&quot;&gt;struct&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;Connected&lt;/span&gt; {
    &lt;span style=&quot;color: #7aa6da;&quot;&gt;ConnectionId&lt;/span&gt; &lt;span style=&quot;color: #e7c547;&quot;&gt;m_id&lt;/span&gt;;
    &lt;span style=&quot;color: #7aa6da;&quot;&gt;std&lt;/span&gt;::&lt;span style=&quot;color: #7aa6da;&quot;&gt;chrono&lt;/span&gt;::&lt;span style=&quot;color: #7aa6da;&quot;&gt;system_clock&lt;/span&gt;::&lt;span style=&quot;color: #7aa6da;&quot;&gt;time_point&lt;/span&gt; &lt;span style=&quot;color: #e7c547;&quot;&gt;m_connectedTime&lt;/span&gt;;
    &lt;span style=&quot;color: #7aa6da;&quot;&gt;std&lt;/span&gt;::&lt;span style=&quot;color: #7aa6da;&quot;&gt;optional&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;std&lt;/span&gt;::&lt;span style=&quot;color: #7aa6da;&quot;&gt;chrono&lt;/span&gt;::milliseconds&amp;gt; &lt;span style=&quot;color: #e7c547;&quot;&gt;m_lastPingTime&lt;/span&gt;;
  };
  &lt;span style=&quot;color: #b9ca4a;&quot;&gt;struct&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;ConnectionInterrupted&lt;/span&gt; {
    &lt;span style=&quot;color: #7aa6da;&quot;&gt;std&lt;/span&gt;::&lt;span style=&quot;color: #7aa6da;&quot;&gt;chrono&lt;/span&gt;::&lt;span style=&quot;color: #7aa6da;&quot;&gt;system_clock&lt;/span&gt;::&lt;span style=&quot;color: #7aa6da;&quot;&gt;time_point&lt;/span&gt; &lt;span style=&quot;color: #e7c547;&quot;&gt;m_disconnectedTime&lt;/span&gt;;
    &lt;span style=&quot;color: #7aa6da;&quot;&gt;Timer&lt;/span&gt; &lt;span style=&quot;color: #e7c547;&quot;&gt;m_reconnectTimer&lt;/span&gt;;
  };

  &lt;span style=&quot;color: #7aa6da;&quot;&gt;std&lt;/span&gt;::&lt;span style=&quot;color: #7aa6da;&quot;&gt;variant&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;Disconnected&lt;/span&gt;,
               &lt;span style=&quot;color: #7aa6da;&quot;&gt;Connecting&lt;/span&gt;,
               &lt;span style=&quot;color: #7aa6da;&quot;&gt;Connected&lt;/span&gt;,
               &lt;span style=&quot;color: #7aa6da;&quot;&gt;ConnectionInterrupted&lt;/span&gt;&amp;gt; &lt;span style=&quot;color: #e7c547;&quot;&gt;m_connection&lt;/span&gt;;
};
&lt;/pre&gt;
&lt;/div&gt;

&lt;aside class=&quot;notes&quot;&gt;
&lt;p&gt;
With types structured correctly, it's not possible to express illegal states.
&lt;/p&gt;

&lt;p&gt;
e.g. Ping time does not exist if we're not connected.
&lt;/p&gt;

&lt;p&gt;
(There are still things that are common to all states, e.g. perhaps this class
represents connection to a specific server.)
&lt;/p&gt;

&lt;p&gt;
A switch statement could still exist, switching on the &lt;code&gt;variant&lt;/code&gt;'s &lt;code&gt;index()&lt;/code&gt;, or
a visitor-based approach could be used.
&lt;/p&gt;

&lt;/aside&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-orgfb8214d&quot;&gt;
&lt;h3 id=&quot;orgfb8214d&quot;&gt;Example: Nullable field&lt;/h3&gt;
&lt;br/&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-cpp&quot;&gt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;class&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;Friend&lt;/span&gt; {
  &lt;span style=&quot;color: #7aa6da;&quot;&gt;std&lt;/span&gt;::&lt;span style=&quot;color: #7aa6da;&quot;&gt;string&lt;/span&gt; &lt;span style=&quot;color: #e7c547;&quot;&gt;m_alias&lt;/span&gt;;
  &lt;span style=&quot;color: #7aa6da;&quot;&gt;bool&lt;/span&gt; &lt;span style=&quot;color: #e7c547;&quot;&gt;m_aliasPopulated&lt;/span&gt;;
  ...
};
&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;
These two fields need to be kept in sync everywhere.
&lt;/p&gt;

&lt;aside class=&quot;notes&quot;&gt;
&lt;p&gt;
Here, a field is populated from a remote source and happens lazily and/or
asynchronously. It is possible that the field never gets populated.
&lt;/p&gt;

&lt;p&gt;
All the code that deals with this field has to ensure that both variables are
kept up to date in sync with each other.
&lt;/p&gt;

&lt;/aside&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org38d0e7b&quot;&gt;
&lt;h3 id=&quot;org38d0e7b&quot;&gt;Example: Nullable field&lt;/h3&gt;
&lt;br/&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-cpp&quot;&gt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;class&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;Friend&lt;/span&gt; {
  &lt;span style=&quot;color: #7aa6da;&quot;&gt;std&lt;/span&gt;::&lt;span style=&quot;color: #7aa6da;&quot;&gt;optional&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;std&lt;/span&gt;::string&amp;gt; &lt;span style=&quot;color: #e7c547;&quot;&gt;m_alias&lt;/span&gt;;
  ...
};
&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;
&lt;code&gt;std::optional&lt;/code&gt; provides a sentinel value that is outside the type.
&lt;/p&gt;

&lt;aside class=&quot;notes&quot;&gt;
&lt;p&gt;
&lt;code&gt;std::optional&lt;/code&gt; captures the true state space of the variable. It is not
possible for two fields to get out of step now.
&lt;/p&gt;

&lt;/aside&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org999b425&quot;&gt;
&lt;h3 id=&quot;org999b425&quot;&gt;Example: Monster AI&lt;/h3&gt;
&lt;br/&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-cpp&quot;&gt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;enum&lt;/span&gt; &lt;span style=&quot;color: #b9ca4a;&quot;&gt;class&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;AggroState&lt;/span&gt; {
  &lt;span style=&quot;color: #e7c547;&quot;&gt;IDLE&lt;/span&gt;,
  &lt;span style=&quot;color: #e7c547;&quot;&gt;CHASING&lt;/span&gt;,
  &lt;span style=&quot;color: #e7c547;&quot;&gt;FIGHTING&lt;/span&gt;
};

&lt;span style=&quot;color: #b9ca4a;&quot;&gt;class&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;MonsterAI&lt;/span&gt; {
  &lt;span style=&quot;color: #7aa6da;&quot;&gt;AggroState&lt;/span&gt; &lt;span style=&quot;color: #e7c547;&quot;&gt;m_aggroState&lt;/span&gt;;

  &lt;span style=&quot;color: #7aa6da;&quot;&gt;float&lt;/span&gt; &lt;span style=&quot;color: #e7c547;&quot;&gt;m_aggroRadius&lt;/span&gt;;
  &lt;span style=&quot;color: #7aa6da;&quot;&gt;PlayerId&lt;/span&gt; &lt;span style=&quot;color: #e7c547;&quot;&gt;m_target&lt;/span&gt;;
  &lt;span style=&quot;color: #7aa6da;&quot;&gt;Timer&lt;/span&gt; &lt;span style=&quot;color: #e7c547;&quot;&gt;m_chaseTimer&lt;/span&gt;;
};
&lt;/pre&gt;
&lt;/div&gt;

&lt;aside class=&quot;notes&quot;&gt;
&lt;p&gt;
Once again, presumably PlayerId has some invalid sentinel value.
&lt;/p&gt;

&lt;/aside&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org80ab22f&quot;&gt;
&lt;h3 id=&quot;org80ab22f&quot;&gt;Example: Monster AI&lt;/h3&gt;
&lt;br/&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-cpp&quot;&gt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;class&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;MonsterAI&lt;/span&gt; {
  &lt;span style=&quot;color: #b9ca4a;&quot;&gt;struct&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;Idle&lt;/span&gt; {
    &lt;span style=&quot;color: #7aa6da;&quot;&gt;float&lt;/span&gt; &lt;span style=&quot;color: #e7c547;&quot;&gt;m_aggroRadius&lt;/span&gt;;
  };
  &lt;span style=&quot;color: #b9ca4a;&quot;&gt;struct&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;Chasing&lt;/span&gt; {
    &lt;span style=&quot;color: #7aa6da;&quot;&gt;PlayerId&lt;/span&gt; &lt;span style=&quot;color: #e7c547;&quot;&gt;m_target&lt;/span&gt;;
    &lt;span style=&quot;color: #7aa6da;&quot;&gt;Timer&lt;/span&gt; &lt;span style=&quot;color: #e7c547;&quot;&gt;m_chaseTimer&lt;/span&gt;;
  };
  &lt;span style=&quot;color: #b9ca4a;&quot;&gt;struct&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;Fighting&lt;/span&gt; {
    &lt;span style=&quot;color: #7aa6da;&quot;&gt;PlayerId&lt;/span&gt; &lt;span style=&quot;color: #e7c547;&quot;&gt;m_target&lt;/span&gt;;
  };

  &lt;span style=&quot;color: #7aa6da;&quot;&gt;std&lt;/span&gt;::&lt;span style=&quot;color: #7aa6da;&quot;&gt;variant&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;Idle&lt;/span&gt;, &lt;span style=&quot;color: #7aa6da;&quot;&gt;Chasing&lt;/span&gt;, &lt;span style=&quot;color: #7aa6da;&quot;&gt;Fighting&lt;/span&gt;&amp;gt; &lt;span style=&quot;color: #e7c547;&quot;&gt;m_aggroState&lt;/span&gt;;
};
&lt;/pre&gt;
&lt;/div&gt;

&lt;aside class=&quot;notes&quot;&gt;
&lt;p&gt;
Now the variables are properly placed into the states that use them.
&lt;/p&gt;

&lt;p&gt;
Chasing and Fighting states could inherit from an Aggroed state that holds a target.
&lt;/p&gt;

&lt;/aside&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org53eb2e2&quot;&gt;
&lt;h3 id=&quot;org53eb2e2&quot;&gt;Example: Design Patterns&lt;/h3&gt;
&lt;p&gt;
The addition of sum types to C++ offers an alternative formulation for some
design patterns.
&lt;/p&gt;

&lt;p&gt;
State machines and expressions are naturally modelled with sum types.
&lt;/p&gt;

&lt;aside class=&quot;notes&quot;&gt;
&lt;p&gt;
Traditional runtime polymorphism approach can lead to bloated base class issue.
&lt;/p&gt;

&lt;p&gt;
Type erasure is another way to go.
&lt;/p&gt;

&lt;p&gt;
Sum types + visitor/pattern matching is a third possibility, particularly
natural for things like ASTs.
&lt;/p&gt;

&lt;/aside&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org78c4fc8&quot;&gt;
&lt;h3 id=&quot;org78c4fc8&quot;&gt;Example: Design Patterns&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Command&lt;/li&gt;
&lt;li&gt;Composite&lt;/li&gt;
&lt;li&gt;State&lt;/li&gt;
&lt;li&gt;Interpreter&lt;/li&gt;

&lt;/ul&gt;

&lt;aside class=&quot;notes&quot;&gt;
&lt;p&gt;
Command uses a flat, wide class hierarchy to encapsulate requests in objects.
&lt;/p&gt;

&lt;p&gt;
Composite: model part-whole hierarchies with uniform interface.
&lt;/p&gt;

&lt;p&gt;
State is obvious: simply replace the contained polymorphic object with a
variant.
&lt;/p&gt;

&lt;p&gt;
Sum types are especially good for representing expressions (think JSON).
&lt;/p&gt;

&lt;p&gt;
Interpreter tackles the expression problem: easy to add new classes (use
OO/interfaces) or new operations (use sum types/visitors)?
&lt;/p&gt;

&lt;/aside&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org4d5c514&quot;&gt;
&lt;h3 id=&quot;org4d5c514&quot;&gt;Designing with Types&lt;/h3&gt;
&lt;br/&gt;
&lt;p&gt;
&lt;code&gt;std::variant&lt;/code&gt; and &lt;code&gt;std::optional&lt;/code&gt; are valuable tools that allow us to model the
state of our business logic more accurately.
&lt;/p&gt;

&lt;p&gt;
When you match the types to the domain accurately, certain categories of tests
just disappear.
&lt;/p&gt;

&lt;aside class=&quot;notes&quot;&gt;
&lt;p&gt;
You don't have to test the edge cases where the representation can fall outside
your reality - because that can't happen.
&lt;/p&gt;

&lt;/aside&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-orgdb39d05&quot;&gt;
&lt;h3 id=&quot;orgdb39d05&quot;&gt;Designing with Types&lt;/h3&gt;
&lt;br/&gt;
&lt;p&gt;
Fitting types to their function more accurately makes code easier to understand
and removes pitfalls.
&lt;/p&gt;

&lt;p&gt;
The bigger the codebase and the more vital the functionality, the more value
there is in correct representation with types.
&lt;/p&gt;

&lt;aside class=&quot;notes&quot;&gt;
&lt;p&gt;
When illegal states are unrepresentable, you don't have to worry about other
programmers misunderstanding the code, or misusing data. In a sense, they
&lt;i&gt;cannot&lt;/i&gt; write something that is wrong.
&lt;/p&gt;

&lt;p&gt;
And when I say &quot;other programmers&quot; of course I mean myself in 3 months&amp;#x2026;
&lt;/p&gt;

&lt;p&gt;
Questionably reusing fields, bending semantics, etc. These are bad practices.
But they happen when we're chasing a deadline.
&lt;/p&gt;

&lt;/aside&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org3f3d0d6&quot;&gt;
&lt;h3 id=&quot;org3f3d0d6&quot;&gt;Using Types to Constrain Behaviour&lt;/h3&gt;
&lt;br/&gt;
&lt;p&gt;
We've seen how an expressive type system (with product and sum types) allows us
to model state more accurately.
&lt;/p&gt;

&lt;p&gt;
&quot;Phantom types&quot; is one technique that helps us to model the &lt;i&gt;behaviour&lt;/i&gt; of our
business logic in the type system. Illegal behaviour becomes a type error.
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org8c9cd18&quot;&gt;
&lt;h3 id=&quot;org8c9cd18&quot;&gt;Phantom Types: Before&lt;/h3&gt;
&lt;br/&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-cpp&quot;&gt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;std&lt;/span&gt;::&lt;span style=&quot;color: #7aa6da;&quot;&gt;string&lt;/span&gt; &lt;span style=&quot;color: #e78c45;&quot;&gt;GetFormData&lt;/span&gt;();

&lt;span style=&quot;color: #7aa6da;&quot;&gt;std&lt;/span&gt;::&lt;span style=&quot;color: #7aa6da;&quot;&gt;string&lt;/span&gt; &lt;span style=&quot;color: #e78c45;&quot;&gt;SanitizeFormData&lt;/span&gt;(&lt;span style=&quot;color: #b9ca4a;&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;std&lt;/span&gt;::&lt;span style=&quot;color: #7aa6da;&quot;&gt;string&lt;/span&gt;&amp;amp;);

&lt;span style=&quot;color: #7aa6da;&quot;&gt;void&lt;/span&gt; &lt;span style=&quot;color: #e78c45;&quot;&gt;ExecuteQuery&lt;/span&gt;(&lt;span style=&quot;color: #b9ca4a;&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;std&lt;/span&gt;::&lt;span style=&quot;color: #7aa6da;&quot;&gt;string&lt;/span&gt;&amp;amp;);
&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;
An injection bug waiting to happen.
&lt;/p&gt;

&lt;aside class=&quot;notes&quot;&gt;
&lt;p&gt;
Let's hope we don't meet little Bobby Tables, and that everywhere we execute a
query we remembered to sanitize the data provided by the user.
&lt;/p&gt;

&lt;p&gt;
The type system is not helping us here. How can we use types to make sure that
we stay safe?
&lt;/p&gt;

&lt;/aside&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-orgc13caae&quot;&gt;
&lt;h3 id=&quot;orgc13caae&quot;&gt;Phantom Types: The setup&lt;/h3&gt;
&lt;br/&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-cpp&quot;&gt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;typename&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;&amp;gt;
&lt;span style=&quot;color: #b9ca4a;&quot;&gt;struct&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;FormData&lt;/span&gt; {
  &lt;span style=&quot;color: #b9ca4a;&quot;&gt;explicit&lt;/span&gt; &lt;span style=&quot;color: #e78c45;&quot;&gt;FormData&lt;/span&gt;(&lt;span style=&quot;color: #b9ca4a;&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;string&lt;/span&gt;&amp;amp; &lt;span style=&quot;color: #e7c547;&quot;&gt;input&lt;/span&gt;) : m_input(input) {}
  &lt;span style=&quot;color: #7aa6da;&quot;&gt;std&lt;/span&gt;::&lt;span style=&quot;color: #7aa6da;&quot;&gt;string&lt;/span&gt; &lt;span style=&quot;color: #e7c547;&quot;&gt;m_input&lt;/span&gt;;
};

&lt;span style=&quot;color: #b9ca4a;&quot;&gt;struct&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;sanitized&lt;/span&gt; {};
&lt;span style=&quot;color: #b9ca4a;&quot;&gt;struct&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;unsanitized&lt;/span&gt; {};
&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;
&lt;code&gt;T&lt;/code&gt; is the &quot;Phantom Type&quot; here.
&lt;/p&gt;

&lt;aside class=&quot;notes&quot;&gt;
&lt;p&gt;
Note that the template argument is unused. It exists &lt;span class=&quot;underline&quot;&gt;only&lt;/span&gt; for compile time
type checking. There is no runtime overhead.
&lt;/p&gt;

&lt;/aside&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org7dfd9f3&quot;&gt;
&lt;h3 id=&quot;org7dfd9f3&quot;&gt;Phantom Types: After&lt;/h3&gt;
&lt;br/&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-cpp&quot;&gt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;FormData&lt;/span&gt;&amp;lt;unsanitized&amp;gt; &lt;span style=&quot;color: #e78c45;&quot;&gt;GetFormData&lt;/span&gt;();

&lt;span style=&quot;color: #7aa6da;&quot;&gt;std&lt;/span&gt;::&lt;span style=&quot;color: #7aa6da;&quot;&gt;optional&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;FormData&lt;/span&gt;&amp;lt;sanitized&amp;gt;&amp;gt;
&lt;span style=&quot;color: #e78c45;&quot;&gt;SanitizeFormData&lt;/span&gt;(&lt;span style=&quot;color: #b9ca4a;&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;FormData&lt;/span&gt;&amp;lt;unsanitized&amp;gt;&amp;amp;);

&lt;span style=&quot;color: #7aa6da;&quot;&gt;void&lt;/span&gt; &lt;span style=&quot;color: #e78c45;&quot;&gt;ExecuteQuery&lt;/span&gt;(&lt;span style=&quot;color: #b9ca4a;&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;FormData&lt;/span&gt;&amp;lt;sanitized&amp;gt;&amp;amp;);
&lt;/pre&gt;
&lt;/div&gt;

&lt;aside class=&quot;notes&quot;&gt;
&lt;p&gt;
User input is born unsanitized.
&lt;/p&gt;

&lt;p&gt;
It is impossible for us to execute unsanitized input. The compiler simply won't
compile it.
&lt;/p&gt;

&lt;p&gt;
We've used types to help enforce the business logic.
&lt;/p&gt;

&lt;p&gt;
This is something similar to a strong typedef, or what enum class effectively
does for integral types. This technique can also be used e.g. in a units
library.
&lt;/p&gt;

&lt;/aside&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org3cc7422&quot;&gt;
&lt;h3 id=&quot;org3cc7422&quot;&gt;Total Functions&lt;/h3&gt;
&lt;br/&gt;
&lt;p&gt;
A &lt;i&gt;total function&lt;/i&gt; is a function that is defined for all inputs in its domain.
&lt;/p&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
&lt;code&gt;template &amp;lt;typename T&amp;gt;
const T&amp;amp; min(const T&amp;amp; a, const T&amp;amp; b);&lt;/code&gt;
&lt;/p&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
&lt;code&gt;float sqrt(float f);&lt;/code&gt;
&lt;/p&gt;

&lt;aside class=&quot;notes&quot;&gt;
&lt;p&gt;
We are straying into the realm of Concepts here.
&lt;/p&gt;

&lt;p&gt;
I'm not saying that total is the same thing as &quot;no preconditions&quot;. The type must
satisfy the requirements on it. But you can see that with functions like &lt;code&gt;sqrt&lt;/code&gt;
there is a clear mismatch between the type of the function and the actual type
of its domain.
&lt;/p&gt;

&lt;/aside&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-orgf3ea037&quot;&gt;
&lt;h3 id=&quot;orgf3ea037&quot;&gt;Let's play another game&lt;/h3&gt;
&lt;p class=&quot;fragment appear&quot;&gt;
To help us see how total functions with the right types can result in
unsurprising code.
&lt;/p&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
I'll give you a function signature with no names attached.
&lt;/p&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
You tell me what it's called&amp;#x2026; (and you'll even know how to implement it).
&lt;/p&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
The only rule&amp;#x2026; it must be a &lt;i&gt;total&lt;/i&gt; function.
&lt;/p&gt;

&lt;aside class=&quot;notes&quot;&gt;
&lt;p&gt;
Assume regular types. Assume that the function is doing something &quot;interesting&quot;
rather than &quot;boring&quot; when you have a choice. (ie. that it uses its argument).
But you needn't assume anything else.
&lt;/p&gt;

&lt;p&gt;
And there are always ways to make things unexpected in C++. But assume nothing
surprising here.
&lt;/p&gt;

&lt;/aside&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org18d9834&quot;&gt;
&lt;h3 id=&quot;org18d9834&quot;&gt;Name That Function&lt;/h3&gt;
&lt;br/&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-cpp&quot;&gt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;typename&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;&amp;gt;
&lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt; &lt;span style=&quot;color: #e78c45;&quot;&gt;f&lt;/span&gt;(&lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
&lt;code&gt;identity&lt;/code&gt;
&lt;/p&gt;

&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;fragment appear&quot;&gt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;int&lt;/span&gt; &lt;span style=&quot;color: #e78c45;&quot;&gt;f&lt;/span&gt;(&lt;span style=&quot;color: #7aa6da;&quot;&gt;int&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;

&lt;aside class=&quot;notes&quot;&gt;
&lt;p&gt;
Note the odd situation here: we know more about &lt;code&gt;f(T)&lt;/code&gt; than we do about
&lt;code&gt;f(int)&lt;/code&gt;.
&lt;/p&gt;

&lt;/aside&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org772a58f&quot;&gt;
&lt;h3 id=&quot;org772a58f&quot;&gt;Name That Function&lt;/h3&gt;
&lt;br/&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-cpp&quot;&gt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;typename&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;, &lt;span style=&quot;color: #b9ca4a;&quot;&gt;typename&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;U&lt;/span&gt;&amp;gt;
&lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt; &lt;span style=&quot;color: #e78c45;&quot;&gt;f&lt;/span&gt;(&lt;span style=&quot;color: #7aa6da;&quot;&gt;pair&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;, &lt;span style=&quot;color: #7aa6da;&quot;&gt;U&lt;/span&gt;&amp;gt;);
&lt;/pre&gt;
&lt;/div&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
&lt;code&gt;first&lt;/code&gt;
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-orgd8701f1&quot;&gt;
&lt;h3 id=&quot;orgd8701f1&quot;&gt;Name That Function&lt;/h3&gt;
&lt;br/&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-cpp&quot;&gt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;typename&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;&amp;gt;
&lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt; &lt;span style=&quot;color: #e78c45;&quot;&gt;f&lt;/span&gt;(&lt;span style=&quot;color: #7aa6da;&quot;&gt;bool&lt;/span&gt;, &lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;, &lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
&lt;code&gt;select&lt;/code&gt;
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-orgc0ac8fb&quot;&gt;
&lt;h3 id=&quot;orgc0ac8fb&quot;&gt;Name That Function&lt;/h3&gt;
&lt;br/&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-cpp&quot;&gt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;typename&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;, &lt;span style=&quot;color: #b9ca4a;&quot;&gt;typename&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;U&lt;/span&gt;&amp;gt;
&lt;span style=&quot;color: #7aa6da;&quot;&gt;U&lt;/span&gt; &lt;span style=&quot;color: #e78c45;&quot;&gt;f&lt;/span&gt;(&lt;span style=&quot;color: #7aa6da;&quot;&gt;function&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #e78c45;&quot;&gt;U&lt;/span&gt;(&lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;)&amp;gt;, &lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
&lt;code&gt;apply&lt;/code&gt; or &lt;code&gt;call&lt;/code&gt;
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org692cfa0&quot;&gt;
&lt;h3 id=&quot;org692cfa0&quot;&gt;Name That Function&lt;/h3&gt;
&lt;br/&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-cpp&quot;&gt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;typename&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;&amp;gt;
&lt;span style=&quot;color: #7aa6da;&quot;&gt;vector&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;&amp;gt; &lt;span style=&quot;color: #e78c45;&quot;&gt;f&lt;/span&gt;(&lt;span style=&quot;color: #7aa6da;&quot;&gt;vector&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;&amp;gt;);
&lt;/pre&gt;
&lt;/div&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
&lt;code&gt;reverse&lt;/code&gt;, &lt;code&gt;shuffle&lt;/code&gt;, &amp;#x2026;
&lt;/p&gt;

&lt;aside class=&quot;notes&quot;&gt;
&lt;p&gt;
For simplicity, I haven't written this signature in terms of iterators, but it
would be just the same.
&lt;/p&gt;

&lt;/aside&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org8ed4d3e&quot;&gt;
&lt;h3 id=&quot;org8ed4d3e&quot;&gt;Name That Function&lt;/h3&gt;
&lt;br/&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-cpp&quot;&gt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;typename&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;&amp;gt;
&lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt; &lt;span style=&quot;color: #e78c45;&quot;&gt;f&lt;/span&gt;(&lt;span style=&quot;color: #7aa6da;&quot;&gt;vector&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;&amp;gt;);
&lt;/pre&gt;
&lt;/div&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
Not possible! It's a partial function - the &lt;code&gt;vector&lt;/code&gt; might be empty.
&lt;/p&gt;

&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;fragment appear&quot;&gt;T&amp;amp; &lt;span style=&quot;color: #7aa6da;&quot;&gt;vector&lt;/span&gt;&amp;lt;T&amp;gt;::front();
&lt;/pre&gt;
&lt;/div&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-orgd6b377f&quot;&gt;
&lt;h3 id=&quot;orgd6b377f&quot;&gt;Name That Function&lt;/h3&gt;
&lt;br/&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-cpp&quot;&gt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;typename&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;&amp;gt;
&lt;span style=&quot;color: #7aa6da;&quot;&gt;optional&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;&amp;gt; &lt;span style=&quot;color: #e78c45;&quot;&gt;f&lt;/span&gt;(&lt;span style=&quot;color: #7aa6da;&quot;&gt;vector&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;&amp;gt;);
&lt;/pre&gt;
&lt;/div&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org0c02c2a&quot;&gt;
&lt;h3 id=&quot;org0c02c2a&quot;&gt;Name That Function&lt;/h3&gt;
&lt;br/&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-cpp&quot;&gt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;typename&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;, &lt;span style=&quot;color: #b9ca4a;&quot;&gt;typename&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;U&lt;/span&gt;&amp;gt;
&lt;span style=&quot;color: #7aa6da;&quot;&gt;vector&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;U&lt;/span&gt;&amp;gt; &lt;span style=&quot;color: #e78c45;&quot;&gt;f&lt;/span&gt;(&lt;span style=&quot;color: #7aa6da;&quot;&gt;function&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #e78c45;&quot;&gt;U&lt;/span&gt;(&lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;)&amp;gt;, &lt;span style=&quot;color: #7aa6da;&quot;&gt;vector&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;&amp;gt;);
&lt;/pre&gt;
&lt;/div&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
&lt;code&gt;transform&lt;/code&gt;
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org3fbdc45&quot;&gt;
&lt;h3 id=&quot;org3fbdc45&quot;&gt;Name That Function&lt;/h3&gt;
&lt;br/&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-cpp&quot;&gt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;typename&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;&amp;gt;
&lt;span style=&quot;color: #7aa6da;&quot;&gt;vector&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;&amp;gt; &lt;span style=&quot;color: #e78c45;&quot;&gt;f&lt;/span&gt;(&lt;span style=&quot;color: #7aa6da;&quot;&gt;function&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;bool&lt;/span&gt;(&lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;)&amp;gt;, &lt;span style=&quot;color: #7aa6da;&quot;&gt;vector&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;&amp;gt;);
&lt;/pre&gt;
&lt;/div&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
&lt;code&gt;remove_if&lt;/code&gt;, &lt;code&gt;partition&lt;/code&gt;, &amp;#x2026;
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org5e36e79&quot;&gt;
&lt;h3 id=&quot;org5e36e79&quot;&gt;Name That Function&lt;/h3&gt;
&lt;br/&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-cpp&quot;&gt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;typename&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;&amp;gt;
&lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt; &lt;span style=&quot;color: #e78c45;&quot;&gt;f&lt;/span&gt;(&lt;span style=&quot;color: #7aa6da;&quot;&gt;optional&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;&amp;gt;);
&lt;/pre&gt;
&lt;/div&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
Not possible!
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org73b2abe&quot;&gt;
&lt;h3 id=&quot;org73b2abe&quot;&gt;Name That Function&lt;/h3&gt;
&lt;br/&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-cpp&quot;&gt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;typename&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;K&lt;/span&gt;, &lt;span style=&quot;color: #b9ca4a;&quot;&gt;typename&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;V&lt;/span&gt;&amp;gt;
&lt;span style=&quot;color: #7aa6da;&quot;&gt;V&lt;/span&gt; &lt;span style=&quot;color: #e78c45;&quot;&gt;f&lt;/span&gt;(&lt;span style=&quot;color: #7aa6da;&quot;&gt;map&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;K&lt;/span&gt;, &lt;span style=&quot;color: #7aa6da;&quot;&gt;V&lt;/span&gt;&amp;gt;, &lt;span style=&quot;color: #7aa6da;&quot;&gt;K&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
Not possible! (The key might not be in the &lt;code&gt;map&lt;/code&gt;.)
&lt;/p&gt;

&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;fragment appear&quot;&gt;V&amp;amp; &lt;span style=&quot;color: #7aa6da;&quot;&gt;map&lt;/span&gt;&amp;lt;K, V&amp;gt;::&lt;span style=&quot;color: #b9ca4a;&quot;&gt;operator&lt;/span&gt;[](&lt;span style=&quot;color: #b9ca4a;&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;K&lt;/span&gt;&amp;amp;);
&lt;/pre&gt;
&lt;/div&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-orgb4684cf&quot;&gt;
&lt;h3 id=&quot;orgb4684cf&quot;&gt;Name That Function&lt;/h3&gt;
&lt;br/&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-cpp&quot;&gt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;typename&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;K&lt;/span&gt;, &lt;span style=&quot;color: #b9ca4a;&quot;&gt;typename&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;V&lt;/span&gt;&amp;gt;
&lt;span style=&quot;color: #7aa6da;&quot;&gt;optional&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;V&lt;/span&gt;&amp;gt; &lt;span style=&quot;color: #e78c45;&quot;&gt;f&lt;/span&gt;(&lt;span style=&quot;color: #7aa6da;&quot;&gt;map&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;K&lt;/span&gt;, &lt;span style=&quot;color: #7aa6da;&quot;&gt;V&lt;/span&gt;&amp;gt;, &lt;span style=&quot;color: #7aa6da;&quot;&gt;K&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
&lt;code&gt;lookup&lt;/code&gt;
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org3d2ed2d&quot;&gt;
&lt;h3 id=&quot;org3d2ed2d&quot;&gt;What Just Happened?&lt;/h3&gt;
&lt;p&gt;
I gave you &lt;i&gt;almost nothing&lt;/i&gt;.
&lt;/p&gt;

&lt;p&gt;
No variable names. No function names. No type names.
&lt;/p&gt;

&lt;p&gt;
Just bare type signatures.
&lt;/p&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
You were able to tell me exactly what the functions should be called, and likely
knew instantly how to implement them.
&lt;/p&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
You will note that partial functions gave us some issues&amp;#x2026;
&lt;/p&gt;

&lt;aside class=&quot;notes&quot;&gt;
&lt;p&gt;
Naming is one of the hardest problems in Comp Sci. Getting the types right is
much easier. And if your types model the logic properly, perhaps you have
&quot;self-documenting code&quot;?
&lt;/p&gt;

&lt;/aside&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org84dac65&quot;&gt;
&lt;h3 id=&quot;org84dac65&quot;&gt;Well-typed Functions&lt;/h3&gt;
&lt;br/&gt;
&lt;p&gt;
Writing &lt;i&gt;total functions&lt;/i&gt; with well-typed signatures can tell us a lot about
functionality.
&lt;/p&gt;

&lt;p&gt;
Using types appropriately makes interfaces unsurprising, safer to use and harder
to misuse.
&lt;/p&gt;

&lt;p&gt;
Total functions make more test categories vanish.
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org7ee0bc1&quot;&gt;
&lt;h3 id=&quot;org7ee0bc1&quot;&gt;About Testing&amp;#x2026;&lt;/h3&gt;
&lt;p&gt;
In a previous talk, I talked about unit testing and in particular property-based testing.
&lt;/p&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
Effectively using types can reduce test code.
&lt;/p&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
Property-based tests say &quot;for all values, this property is true&quot;.
&lt;/p&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
That is exactly what types &lt;i&gt;are&lt;/i&gt;: universal quantifications about what can be
done with data.
&lt;/p&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
Types scale better than tests. Instead of TDD, maybe try TDD!
&lt;/p&gt;

&lt;aside class=&quot;notes&quot;&gt;
&lt;p&gt;
C++'s type system isn't yet powerful enough to be able to say goodbye to tests,
but it is powerful enough that used effectively, we can reduce some of the
drudgery of writing tests.
&lt;/p&gt;

&lt;p&gt;
Any time you're thinking something is true for all values, that's what a type
can do.
&lt;/p&gt;

&lt;/aside&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org135b1ee&quot;&gt;
&lt;h3 id=&quot;org135b1ee&quot;&gt;Further Down the Rabbit Hole&lt;/h3&gt;
&lt;br/&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Algebraic_data_type&quot;&gt;http://en.wikipedia.org/wiki/Algebraic_data_type&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://chris-taylor.github.io/blog/2013/02/10/the-algebra-of-algebraic-data-types/&quot;&gt;http://chris-taylor.github.io/blog/2013/02/10/the-algebra-of-algebraic-data-types/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://vimeo.com/14313378&quot;&gt;https://vimeo.com/14313378&lt;/a&gt; (Effective ML: Making Illegal States Unrepresentable)&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.infoq.com/presentations/Types-Tests&quot;&gt;http://www.infoq.com/presentations/Types-Tests&lt;/a&gt; (Types vs Tests: Strange Loop 2012)&lt;/li&gt;

&lt;/ul&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-orgbbd91e9&quot;&gt;
&lt;h3 id=&quot;orgbbd91e9&quot;&gt;Thanks For Listening&lt;/h3&gt;
&lt;br/&gt;
&lt;p&gt;
&quot;On the whole, I'm inclined to say that when in doubt, make a new type.&quot;
&lt;/p&gt;
&lt;div align=&quot;right&quot;&gt;
&lt;p&gt;
&amp;#x2013; Martin Fowler, &lt;a href=&quot;http://martinfowler.com/ieeeSoftware/whenType.pdf&quot;&gt;&lt;i&gt;When to Make a Type&lt;/i&gt;&lt;/a&gt;
&lt;/p&gt;
&lt;/div&gt;&lt;br/&gt;
&lt;p&gt;
&quot;Don't set a flag; set the data.&quot;
&lt;/p&gt;
&lt;div align=&quot;right&quot;&gt;
&lt;p&gt;
&amp;#x2013; Leo Brodie, &lt;i&gt;&lt;a href=&quot;http://thinking-forth.sourceforge.net/&quot;&gt;Thinking Forth&lt;/a&gt;&lt;/i&gt;
&lt;/p&gt;
&lt;/div&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org88dc815&quot;&gt;
&lt;h3 id=&quot;org88dc815&quot;&gt;Goals for Well-typed Code&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Make illegal states unrepresentable&lt;/li&gt;
&lt;li&gt;Use &lt;code&gt;std::variant&lt;/code&gt; and &lt;code&gt;std::optional&lt;/code&gt; for formulations that
&lt;ul&gt;
&lt;li&gt;are more natural&lt;/li&gt;
&lt;li&gt;fit the business logic state better&lt;/li&gt;

&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Use phantom types for safety
&lt;ul&gt;
&lt;li&gt;Make illegal behaviour a compile error&lt;/li&gt;

&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Write total functions
&lt;ul&gt;
&lt;li&gt;Unsurprising behaviour&lt;/li&gt;
&lt;li&gt;Easy to use, hard to misuse&lt;/li&gt;

&lt;/ul&gt;&lt;/li&gt;

&lt;/ul&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org44ccf2b&quot;&gt;
&lt;h3 id=&quot;org44ccf2b&quot;&gt;Epilogue&lt;/h3&gt;
&lt;p&gt;
A taste of algebra with datatypes
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-orga977832&quot;&gt;
&lt;h3 id=&quot;orga977832&quot;&gt;A Taste of Algebra with Datatypes&lt;/h3&gt;
&lt;p&gt;
How many values?
&lt;/p&gt;
&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-cpp&quot;&gt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span style=&quot;color: #b9ca4a;&quot;&gt;typename&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;&amp;gt;
&lt;span style=&quot;color: #b9ca4a;&quot;&gt;class&lt;/span&gt; &lt;span style=&quot;color: #7aa6da;&quot;&gt;vector&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;T&lt;/span&gt;&amp;gt;;
&lt;/pre&gt;
&lt;/div&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
We can define a &lt;code&gt;vector&amp;lt;T&amp;gt;&lt;/code&gt; recursively:
&lt;/p&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
\({v(t)} = {1 + t v(t)}\)
&lt;/p&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
(empty vector or (+) head element and (*) tail vector)
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org88a8f0e&quot;&gt;
&lt;h3 id=&quot;org88a8f0e&quot;&gt;A Taste of Algebra with Datatypes&lt;/h3&gt;
&lt;p&gt;
And rearrange&amp;#x2026;
&lt;/p&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
What does that mean? Subtracting and dividing types?
&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org28f9a50&quot;&gt;
&lt;h3 id=&quot;org28f9a50&quot;&gt;A Taste of Algebra with Datatypes&lt;/h3&gt;
&lt;p&gt;
When we don't know how to interpret something mathematical?
&lt;/p&gt;

&lt;p class=&quot;fragment appear&quot;&gt;Let's &lt;a href=&quot;http://www.wolframalpha.com/input/?i=1/(1-t)&quot; data-preview-link&gt;ask Wolfram Alpha&lt;/a&gt;.&lt;/p&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org86752cf&quot;&gt;
&lt;h3 id=&quot;org86752cf&quot;&gt;A Taste of Algebra with Datatypes&lt;/h3&gt;
&lt;p&gt;
Series expansion at \({t = 0}\):
&lt;/p&gt;

&lt;p&gt;
\({1 + t + t^2 + t^3 + t^4 +{ }...}\)
&lt;/p&gt;

&lt;p class=&quot;fragment appear&quot;&gt;
A &lt;code&gt;vector&amp;lt;T&amp;gt;&lt;/code&gt; can have:
&lt;/p&gt;
&lt;ul&gt;
&lt;li class=&quot;fragment appear&quot;&gt;0 elements (\({1}\))&lt;/li&gt;
&lt;li class=&quot;fragment appear&quot;&gt;or (+) 1 element (\({t}\))&lt;/li&gt;
&lt;li class=&quot;fragment appear&quot;&gt;or (+) 2 elements (\({t^2}\))&lt;/li&gt;
&lt;li class=&quot;fragment appear&quot;&gt;etc.&lt;/li&gt;

&lt;/ul&gt;

&lt;/section&gt;
&lt;section id=&quot;slide-org69899fd&quot;&gt;
&lt;h3 id=&quot;org69899fd&quot;&gt;Goals for Well-typed Code&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Make illegal states unrepresentable&lt;/li&gt;
&lt;li&gt;Use &lt;code&gt;std::variant&lt;/code&gt; and &lt;code&gt;std::optional&lt;/code&gt; for formulations that
&lt;ul&gt;
&lt;li&gt;are more natural&lt;/li&gt;
&lt;li&gt;fit the business logic state better&lt;/li&gt;

&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Use phantom types for safety
&lt;ul&gt;
&lt;li&gt;Make illegal behaviour a compile error&lt;/li&gt;

&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Write total functions
&lt;ul&gt;
&lt;li&gt;Unsurprising behaviour&lt;/li&gt;
&lt;li&gt;Easy to use, hard to misuse&lt;/li&gt;

&lt;/ul&gt;&lt;/li&gt;

&lt;/ul&gt;
&lt;/section&gt;
&lt;/section&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;script src=&quot;file:///Users/moyano/Documents/Sandbox/reveal.js-3.4.1/js/reveal.js/lib/js/head.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;file:///Users/moyano/Documents/Sandbox/reveal.js-3.4.1/js/reveal.js/js/reveal.js&quot;&gt;&lt;/script&gt;

&lt;script&gt;
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({

controls: false,
progress: true,
history: true,
center: true,
slideNumber: 'c/t',
rollingLinks: false,
keyboard: true,
overview: true,
width: 1200,
height: 900,
margin: 0.10,
minScale: 0.50,
maxScale: 2.50,

theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
transition: Reveal.getQueryHash().transition || 'none', // default/cube/page/concave/zoom/linear/fade/none
transitionSpeed: 'default',
multiplex: {
    secret: '', // null if client
    id: '', // id, obtained from socket.io server
    url: '' // Location of socket.io server
},

// Optional libraries used to extend on reveal.js
dependencies: [
 { src: 'file:///Users/moyano/Documents/Sandbox/reveal.js-3.4.1/js/reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
 { src: 'file:///Users/moyano/Documents/Sandbox/reveal.js-3.4.1/js/reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: 'file:///Users/moyano/Documents/Sandbox/reveal.js-3.4.1/js/reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: 'file:///Users/moyano/Documents/Sandbox/reveal.js-3.4.1/js/reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
 { src: 'file:///Users/moyano/Documents/Sandbox/reveal.js-3.4.1/js/reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }]
});
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</content><author><name></name></author><summary type="html">Using Types Effectively</summary></entry><entry><title type="html">hello world in haskell</title><link href="http://localhost:4000/haskell/2015/08/30/hello-world-in-haskell.html" rel="alternate" type="text/html" title="hello world in haskell" /><published>2015-08-30T16:15:48-03:00</published><updated>2015-08-30T16:15:48-03:00</updated><id>http://localhost:4000/haskell/2015/08/30/hello-world-in-haskell</id><content type="html" xml:base="http://localhost:4000/haskell/2015/08/30/hello-world-in-haskell.html">&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;main = do
    putStrLn &quot;hello world&quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;</content><author><name></name></author><summary type="html">main = do putStrLn &quot;hello world&quot;</summary></entry><entry><title type="html">Welcome to Jekyll!</title><link href="http://localhost:4000/jekyll/update/2015/08/29/welcome-to-jekyll.html" rel="alternate" type="text/html" title="Welcome to Jekyll!" /><published>2015-08-29T16:15:48-03:00</published><updated>2015-08-29T16:15:48-03:00</updated><id>http://localhost:4000/jekyll/update/2015/08/29/welcome-to-jekyll</id><content type="html" xml:base="http://localhost:4000/jekyll/update/2015/08/29/welcome-to-jekyll.html">&lt;p&gt;You’ll find this post in your &lt;code class=&quot;highlighter-rouge&quot;&gt;_posts&lt;/code&gt; directory. Go ahead and edit it and re-build the site to see your changes. You can rebuild the site in many different ways, but the most common way is to run &lt;code class=&quot;highlighter-rouge&quot;&gt;jekyll serve&lt;/code&gt;, which launches a web server and auto-regenerates your site when a file is updated.&lt;/p&gt;

&lt;p&gt;To add new posts, simply add a file in the &lt;code class=&quot;highlighter-rouge&quot;&gt;_posts&lt;/code&gt; directory that follows the convention &lt;code class=&quot;highlighter-rouge&quot;&gt;YYYY-MM-DD-name-of-post.ext&lt;/code&gt; and includes the necessary front matter. Take a look at the source for this post to get an idea about how it works.&lt;/p&gt;

&lt;p&gt;Jekyll also offers powerful support for code snippets:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;print_hi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Hi, &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;print_hi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'Tom'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#=&amp;gt; prints 'Hi, Tom' to STDOUT.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Check out the &lt;a href=&quot;http://jekyllrb.com&quot;&gt;Jekyll docs&lt;/a&gt; for more info on how to get the most out of Jekyll. File all bugs/feature requests at &lt;a href=&quot;https://github.com/jekyll/jekyll&quot;&gt;Jekyll’s GitHub repo&lt;/a&gt;. If you have questions, you can ask them on &lt;a href=&quot;https://github.com/jekyll/jekyll-help&quot;&gt;Jekyll’s dedicated Help repository&lt;/a&gt;.&lt;/p&gt;</content><author><name></name></author><summary type="html">You’ll find this post in your _posts directory. Go ahead and edit it and re-build the site to see your changes. You can rebuild the site in many different ways, but the most common way is to run jekyll serve, which launches a web server and auto-regenerates your site when a file is updated.</summary></entry><entry><title type="html">dummy 2</title><link href="http://localhost:4000/jekyll/update/2015/01/07/dummy-post-2.html" rel="alternate" type="text/html" title="dummy 2" /><published>2015-01-07T16:15:48-03:00</published><updated>2015-01-07T16:15:48-03:00</updated><id>http://localhost:4000/jekyll/update/2015/01/07/dummy-post-2</id><content type="html" xml:base="http://localhost:4000/jekyll/update/2015/01/07/dummy-post-2.html">&lt;p&gt;dummy post 2&lt;/p&gt;</content><author><name></name></author><summary type="html">dummy post 2</summary></entry><entry><title type="html">Programación en R</title><link href="http://localhost:4000/2015/01/06/dummy-post-2.html" rel="alternate" type="text/html" title="Programación en R" /><published>2015-01-06T00:00:00-03:00</published><updated>2015-01-06T00:00:00-03:00</updated><id>http://localhost:4000/2015/01/06/dummy-post-2</id><content type="html" xml:base="http://localhost:4000/2015/01/06/dummy-post-2.html">&lt;section data-markdown=&quot;&quot;&gt;


# Primero de todos!!!!

slide 1 with ox-reveal

&lt;/section&gt;
&lt;section data-markdown=&quot;&quot;&gt;


## Y además

some text here and there

    require(dplyr)
    df %&amp;gt;% select(V1)

&lt;/section&gt;
&lt;section data-markdown=&quot;&quot;&gt;


# Segundo de todo

Slide 2

1.  listas,
2.  y listas,
3.  y más listas

&lt;/section&gt;
&lt;section data-markdown=&quot;&quot;&gt;

&lt;/section&gt;</content><author><name></name></author><summary type="html"></summary></entry><entry><title type="html">Dummy Post 2</title><link href="http://localhost:4000/2015/01/06/dummy-post-2.html" rel="alternate" type="text/html" title="Dummy Post 2" /><published>2015-01-06T00:00:00-03:00</published><updated>2015-01-06T00:00:00-03:00</updated><id>http://localhost:4000/2015/01/06/dummy-post-2</id><content type="html" xml:base="http://localhost:4000/2015/01/06/dummy-post-2.html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;title&gt;&quot;Org mode con Org-reveal y Jekyll&quot;&lt;/title&gt;
&lt;meta name=&quot;author&quot; content=&quot;(moyano)&quot;/&gt;
&lt;style type=&quot;text/css&quot;&gt;
.underline { text-decoration: underline; }
&lt;/style&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;../reveal.js/css/reveal.css&quot;/&gt;

&lt;link rel=&quot;stylesheet&quot; href=&quot;../reveal.js/css/theme/moon.css&quot; id=&quot;theme&quot;/&gt;


&lt;!-- If the query includes 'print-pdf', include the PDF print sheet --&gt;
&lt;script&gt;
    if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = '../reveal.js/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    }
&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div class=&quot;reveal&quot;&gt;
&lt;div class=&quot;slides&quot;&gt;
&lt;section id=&quot;sec-title-slide&quot;&gt;&lt;h1 class=&quot;title&quot;&gt;&quot;Org mode con Org-reveal y Jekyll&quot;&lt;/h1&gt;&lt;h2 class=&quot;author&quot;&gt;moyano&lt;/h2&gt;&lt;p class=&quot;date&quot;&gt;Created: 2017-04-06 Thu 12:31&lt;/p&gt;
&lt;/section&gt;

&lt;section&gt;
&lt;section id=&quot;slide-org9653a3a&quot;&gt;
&lt;h2 id=&quot;org9653a3a&quot;&gt;&lt;span class=&quot;section-number-2&quot;&gt;1&lt;/span&gt; Cómo funciona:&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;Ox-reveal exporter generates html&lt;/li&gt;
&lt;li&gt;needs reveal&lt;sub&gt;root&lt;/sub&gt; &quot;../reveal.js&quot; when file in _posts/&lt;/li&gt;
&lt;li&gt;Generates html in _posts/ only&lt;/li&gt;
&lt;li&gt;No yaml processing (which things can i pass from org's #+ type of options?)&lt;/li&gt;

&lt;/ol&gt;

&lt;/section&gt;
&lt;/section&gt;
&lt;section&gt;
&lt;section id=&quot;slide-org9084d04&quot;&gt;
&lt;h2 id=&quot;org9084d04&quot;&gt;&lt;span class=&quot;section-number-2&quot;&gt;2&lt;/span&gt; Y además&lt;/h2&gt;
&lt;p&gt;
some text here and there
&lt;/p&gt;

&lt;div class=&quot;org-src-container&quot;&gt;

&lt;pre  class=&quot;src src-R&quot;&gt;&lt;span style=&quot;color: #7aa6da;&quot;&gt;require&lt;/span&gt;(dplyr)
df &lt;span style=&quot;color: #7aa6da;&quot;&gt;%&amp;gt;%&lt;/span&gt; select(V1)
&lt;/pre&gt;
&lt;/div&gt;

&lt;/section&gt;
&lt;/section&gt;
&lt;section&gt;
&lt;section id=&quot;slide-orgee269a8&quot;&gt;
&lt;h2 id=&quot;orgee269a8&quot;&gt;&lt;span class=&quot;section-number-2&quot;&gt;3&lt;/span&gt; Segundo de todo&lt;/h2&gt;
&lt;p&gt;
Slide 2
&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;listas,&lt;/li&gt;
&lt;li&gt;y listas,&lt;/li&gt;
&lt;li&gt;y más listas&lt;/li&gt;

&lt;/ol&gt;
&lt;/section&gt;
&lt;/section&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;script src=&quot;../reveal.js/lib/js/head.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;../reveal.js/js/reveal.js&quot;&gt;&lt;/script&gt;

&lt;script&gt;
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({

controls: true,
progress: true,
history: false,
center: false,
slideNumber: 'c',
rollingLinks: true,
keyboard: true,
overview: true,
width: 1200,
height: 800,

theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none
transitionSpeed: 'default',
multiplex: {
    secret: '', // null if client
    id: '', // id, obtained from socket.io server
    url: '' // Location of socket.io server
},

// Optional libraries used to extend on reveal.js
dependencies: [
 { src: '../reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
 { src: '../reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: '../reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: '../reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
 { src: '../reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }]
});
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</content><author><name></name></author><summary type="html">&quot;Org mode con Org-reveal y Jekyll&quot;</summary></entry><entry><title type="html">Programación en R</title><link href="http://localhost:4000/2015/01/06/dummy-post-1.html" rel="alternate" type="text/html" title="Programación en R" /><published>2015-01-06T00:00:00-03:00</published><updated>2015-01-06T00:00:00-03:00</updated><id>http://localhost:4000/2015/01/06/dummy-post-1</id><content type="html" xml:base="http://localhost:4000/2015/01/06/dummy-post-1.html">&lt;section data-markdown=&quot;&quot;&gt;



# Cuándo funciona:

Yeckyll funciona con org-mode md exporter, poniendo &quot;section&quot; etc.

1.  Usar (setq org-reveal-root &quot;/reveal.js&quot;)
2.  Cuidado con usar tags de html! Puede romper reveal.js

 
&lt;/section&gt;
&lt;section data-markdown=&quot;&quot;&gt;



## Y además

some text here and there

 
&lt;/section&gt;
&lt;section data-markdown=&quot;&quot;&gt;



# Segundo de todo

Slide 2

1.  listas,
2.  y listas,
3.  y más listas

 
&lt;/section&gt;</content><author><name></name></author><summary type="html"></summary></entry></feed>